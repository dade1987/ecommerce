/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const we={},dn=[],at=()=>{},pi=()=>!1,ns=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),mi=e=>e.startsWith("onUpdate:"),ke=Object.assign,os=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Or=Object.prototype.hasOwnProperty,fe=(e,t)=>Or.call(e,t),ee=Array.isArray,An=e=>go(e)==="[object Map]",Fr=e=>go(e)==="[object Set]",Z=e=>typeof e=="function",Ye=e=>typeof e=="string",zn=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",gi=e=>(Te(e)||Z(e))&&Z(e.then)&&Z(e.catch),Br=Object.prototype.toString,go=e=>Br.call(e),jr=e=>go(e).slice(8,-1),Ur=e=>go(e)==="[object Object]",ss=e=>Ye(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,kn=hi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yo=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Dr=/-\w/g,Zt=yo(e=>e.replace(Dr,t=>t.slice(1).toUpperCase())),Nr=/\B([A-Z])/g,qn=yo(e=>e.replace(Nr,"-$1").toLowerCase()),$r=yo(e=>e.charAt(0).toUpperCase()+e.slice(1)),ko=yo(e=>e?`on${$r(e)}`:""),Bt=(e,t)=>!Object.is(e,t),Io=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},yi=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Wr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let js;const wo=()=>js||(js=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function is(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],s=Ye(o)?zr(o):is(o);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ye(e)||Te(e))return e}const Gr=/;(?![^(]*\))/g,Vr=/:([^]+)/,Kr=/\/\*[^]*?\*\//g;function zr(e){const t={};return e.replace(Kr,"").split(Gr).forEach(n=>{if(n){const o=n.split(Vr);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function rs(e){let t="";if(Ye(e))t=e;else if(ee(e))for(let n=0;n<e.length;n++){const o=rs(e[n]);o&&(t+=o+" ")}else if(Te(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let We;class qr{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=We,!t&&We&&(this.index=(We.scopes||(We.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=We;try{return We=this,t()}finally{We=n}}}on(){++this._on===1&&(this.prevScope=We,We=this)}off(){this._on>0&&--this._on===0&&(We=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Jr(){return We}let ye;const Oo=new WeakSet;class wi{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,We&&We.active&&We.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Oo.has(this)&&(Oo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Us(this),Si(this);const t=ye,n=ct;ye=this,ct=!0;try{return this.fn()}finally{vi(this),ye=t,ct=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)cs(t);this.deps=this.depsTail=void 0,Us(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Oo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Go(this)&&this.run()}get dirty(){return Go(this)}}let bi=0,In,On;function xi(e,t=!1){if(e.flags|=8,t){e.next=On,On=e;return}e.next=In,In=e}function ls(){bi++}function as(){if(--bi>0)return;if(On){let t=On;for(On=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;In;){let t=In;for(In=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Si(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function vi(e){let t,n=e.depsTail,o=n;for(;o;){const s=o.prevDep;o.version===-1?(o===n&&(n=s),cs(o),Yr(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=s}e.deps=t,e.depsTail=n}function Go(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_i(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _i(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Nn)||(e.globalVersion=Nn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Go(e))))return;e.flags|=2;const t=e.dep,n=ye,o=ct;ye=e,ct=!0;try{Si(e);const s=e.fn(e._value);(t.version===0||Bt(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ye=n,ct=o,vi(e),e.flags&=-3}}function cs(e,t=!1){const{dep:n,prevSub:o,nextSub:s}=e;if(o&&(o.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)cs(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Yr(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ct=!0;const Li=[];function Mt(){Li.push(ct),ct=!1}function Pt(){const e=Li.pop();ct=e===void 0?!0:e}function Us(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ye;ye=void 0;try{t()}finally{ye=n}}}let Nn=0;class Xr{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class us{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ye||!ct||ye===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ye)n=this.activeLink=new Xr(ye,this),ye.deps?(n.prevDep=ye.depsTail,ye.depsTail.nextDep=n,ye.depsTail=n):ye.deps=ye.depsTail=n,Ri(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=ye.depsTail,n.nextDep=void 0,ye.depsTail.nextDep=n,ye.depsTail=n,ye.deps===n&&(ye.deps=o)}return n}trigger(t){this.version++,Nn++,this.notify(t)}notify(t){ls();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{as()}}}function Ri(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ri(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Vo=new WeakMap,Qt=Symbol(""),Ko=Symbol(""),$n=Symbol("");function Oe(e,t,n){if(ct&&ye){let o=Vo.get(e);o||Vo.set(e,o=new Map);let s=o.get(n);s||(o.set(n,s=new us),s.map=o,s.key=n),s.track()}}function Ct(e,t,n,o,s,i){const r=Vo.get(e);if(!r){Nn++;return}const a=u=>{u&&u.trigger()};if(ls(),t==="clear")r.forEach(a);else{const u=ee(e),m=u&&ss(n);if(u&&n==="length"){const p=Number(o);r.forEach((b,F)=>{(F==="length"||F===$n||!zn(F)&&F>=p)&&a(b)})}else switch((n!==void 0||r.has(void 0))&&a(r.get(n)),m&&a(r.get($n)),t){case"add":u?m&&a(r.get("length")):(a(r.get(Qt)),An(e)&&a(r.get(Ko)));break;case"delete":u||(a(r.get(Qt)),An(e)&&a(r.get(Ko)));break;case"set":An(e)&&a(r.get(Qt));break}}as()}function un(e){const t=ue(e);return t===e?t:(Oe(t,"iterate",$n),ut(e)?t:t.map(Ue))}function fs(e){return Oe(e=ue(e),"iterate",$n),e}const Qr={__proto__:null,[Symbol.iterator](){return Fo(this,Symbol.iterator,Ue)},concat(...e){return un(this).concat(...e.map(t=>ee(t)?un(t):t))},entries(){return Fo(this,"entries",e=>(e[1]=Ue(e[1]),e))},every(e,t){return Rt(this,"every",e,t,void 0,arguments)},filter(e,t){return Rt(this,"filter",e,t,n=>n.map(Ue),arguments)},find(e,t){return Rt(this,"find",e,t,Ue,arguments)},findIndex(e,t){return Rt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Rt(this,"findLast",e,t,Ue,arguments)},findLastIndex(e,t){return Rt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Rt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Bo(this,"includes",e)},indexOf(...e){return Bo(this,"indexOf",e)},join(e){return un(this).join(e)},lastIndexOf(...e){return Bo(this,"lastIndexOf",e)},map(e,t){return Rt(this,"map",e,t,void 0,arguments)},pop(){return Tn(this,"pop")},push(...e){return Tn(this,"push",e)},reduce(e,...t){return Ds(this,"reduce",e,t)},reduceRight(e,...t){return Ds(this,"reduceRight",e,t)},shift(){return Tn(this,"shift")},some(e,t){return Rt(this,"some",e,t,void 0,arguments)},splice(...e){return Tn(this,"splice",e)},toReversed(){return un(this).toReversed()},toSorted(e){return un(this).toSorted(e)},toSpliced(...e){return un(this).toSpliced(...e)},unshift(...e){return Tn(this,"unshift",e)},values(){return Fo(this,"values",Ue)}};function Fo(e,t,n){const o=fs(e),s=o[t]();return o!==e&&!ut(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Zr=Array.prototype;function Rt(e,t,n,o,s,i){const r=fs(e),a=r!==e&&!ut(e),u=r[t];if(u!==Zr[t]){const b=u.apply(e,i);return a?Ue(b):b}let m=n;r!==e&&(a?m=function(b,F){return n.call(this,Ue(b),F,e)}:n.length>2&&(m=function(b,F){return n.call(this,b,F,e)}));const p=u.call(r,m,o);return a&&s?s(p):p}function Ds(e,t,n,o){const s=fs(e);let i=n;return s!==e&&(ut(e)?n.length>3&&(i=function(r,a,u){return n.call(this,r,a,u,e)}):i=function(r,a,u){return n.call(this,r,Ue(a),u,e)}),s[t](i,...o)}function Bo(e,t,n){const o=ue(e);Oe(o,"iterate",$n);const s=o[t](...n);return(s===-1||s===!1)&&ms(n[0])?(n[0]=ue(n[0]),o[t](...n)):s}function Tn(e,t,n=[]){Mt(),ls();const o=ue(e)[t].apply(e,n);return as(),Pt(),o}const el=hi("__proto__,__v_isRef,__isVue"),Ti=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(zn));function tl(e){zn(e)||(e=String(e));const t=ue(this);return Oe(t,"has",e),t.hasOwnProperty(e)}class Ei{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return o===(s?i?fl:Hi:i?Pi:Mi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const r=ee(t);if(!s){let u;if(r&&(u=Qr[n]))return u;if(n==="hasOwnProperty")return tl}const a=Reflect.get(t,n,Fe(t)?t:o);if((zn(n)?Ti.has(n):el(n))||(s||Oe(t,"get",n),i))return a;if(Fe(a)){const u=r&&ss(n)?a:a.value;return s&&Te(u)?qo(u):u}return Te(a)?s?qo(a):hs(a):a}}class Ci extends Ei{constructor(t=!1){super(!1,t)}set(t,n,o,s){let i=t[n];if(!this._isShallow){const u=en(i);if(!ut(o)&&!en(o)&&(i=ue(i),o=ue(o)),!ee(t)&&Fe(i)&&!Fe(o))return u||(i.value=o),!0}const r=ee(t)&&ss(n)?Number(n)<t.length:fe(t,n),a=Reflect.set(t,n,o,Fe(t)?t:s);return t===ue(s)&&(r?Bt(o,i)&&Ct(t,"set",n,o):Ct(t,"add",n,o)),a}deleteProperty(t,n){const o=fe(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&o&&Ct(t,"delete",n,void 0),s}has(t,n){const o=Reflect.has(t,n);return(!zn(n)||!Ti.has(n))&&Oe(t,"has",n),o}ownKeys(t){return Oe(t,"iterate",ee(t)?"length":Qt),Reflect.ownKeys(t)}}class nl extends Ei{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ol=new Ci,sl=new nl,il=new Ci(!0);const zo=e=>e,no=e=>Reflect.getPrototypeOf(e);function rl(e,t,n){return function(...o){const s=this.__v_raw,i=ue(s),r=An(i),a=e==="entries"||e===Symbol.iterator&&r,u=e==="keys"&&r,m=s[e](...o),p=n?zo:t?Jo:Ue;return!t&&Oe(i,"iterate",u?Ko:Qt),{next(){const{value:b,done:F}=m.next();return F?{value:b,done:F}:{value:a?[p(b[0]),p(b[1])]:p(b),done:F}},[Symbol.iterator](){return this}}}}function oo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ll(e,t){const n={get(s){const i=this.__v_raw,r=ue(i),a=ue(s);e||(Bt(s,a)&&Oe(r,"get",s),Oe(r,"get",a));const{has:u}=no(r),m=t?zo:e?Jo:Ue;if(u.call(r,s))return m(i.get(s));if(u.call(r,a))return m(i.get(a));i!==r&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Oe(ue(s),"iterate",Qt),s.size},has(s){const i=this.__v_raw,r=ue(i),a=ue(s);return e||(Bt(s,a)&&Oe(r,"has",s),Oe(r,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const r=this,a=r.__v_raw,u=ue(a),m=t?zo:e?Jo:Ue;return!e&&Oe(u,"iterate",Qt),a.forEach((p,b)=>s.call(i,m(p),m(b),r))}};return ke(n,e?{add:oo("add"),set:oo("set"),delete:oo("delete"),clear:oo("clear")}:{add(s){!t&&!ut(s)&&!en(s)&&(s=ue(s));const i=ue(this);return no(i).has.call(i,s)||(i.add(s),Ct(i,"add",s,s)),this},set(s,i){!t&&!ut(i)&&!en(i)&&(i=ue(i));const r=ue(this),{has:a,get:u}=no(r);let m=a.call(r,s);m||(s=ue(s),m=a.call(r,s));const p=u.call(r,s);return r.set(s,i),m?Bt(i,p)&&Ct(r,"set",s,i):Ct(r,"add",s,i),this},delete(s){const i=ue(this),{has:r,get:a}=no(i);let u=r.call(i,s);u||(s=ue(s),u=r.call(i,s)),a&&a.call(i,s);const m=i.delete(s);return u&&Ct(i,"delete",s,void 0),m},clear(){const s=ue(this),i=s.size!==0,r=s.clear();return i&&Ct(s,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=rl(s,e,t)}),n}function ds(e,t){const n=ll(e,t);return(o,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(fe(n,s)&&s in o?n:o,s,i)}const al={get:ds(!1,!1)},cl={get:ds(!1,!0)},ul={get:ds(!0,!1)};const Mi=new WeakMap,Pi=new WeakMap,Hi=new WeakMap,fl=new WeakMap;function dl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hl(e){return e.__v_skip||!Object.isExtensible(e)?0:dl(jr(e))}function hs(e){return en(e)?e:ps(e,!1,ol,al,Mi)}function pl(e){return ps(e,!1,il,cl,Pi)}function qo(e){return ps(e,!0,sl,ul,Hi)}function ps(e,t,n,o,s){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=hl(e);if(i===0)return e;const r=s.get(e);if(r)return r;const a=new Proxy(e,i===2?o:n);return s.set(e,a),a}function Fn(e){return en(e)?Fn(e.__v_raw):!!(e&&e.__v_isReactive)}function en(e){return!!(e&&e.__v_isReadonly)}function ut(e){return!!(e&&e.__v_isShallow)}function ms(e){return e?!!e.__v_raw:!1}function ue(e){const t=e&&e.__v_raw;return t?ue(t):e}function ml(e){return!fe(e,"__v_skip")&&Object.isExtensible(e)&&yi(e,"__v_skip",!0),e}const Ue=e=>Te(e)?hs(e):e,Jo=e=>Te(e)?qo(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function gl(e){return yl(e,!1)}function yl(e,t){return Fe(e)?e:new wl(e,t)}class wl{constructor(t,n){this.dep=new us,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ue(t),this._value=n?t:Ue(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||ut(t)||en(t);t=o?t:ue(t),Bt(t,n)&&(this._rawValue=t,this._value=o?t:Ue(t),this.dep.trigger())}}function bl(e){return Fe(e)?e.value:e}const xl={get:(e,t,n)=>t==="__v_raw"?e:bl(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const s=e[t];return Fe(s)&&!Fe(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function Ai(e){return Fn(e)?e:new Proxy(e,xl)}class Sl{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new us(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Nn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&ye!==this)return xi(this,!0),!0}get value(){const t=this.dep.track();return _i(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function vl(e,t,n=!1){let o,s;return Z(e)?o=e:(o=e.get,s=e.set),new Sl(o,s,n)}const so={},co=new WeakMap;let Xt;function _l(e,t=!1,n=Xt){if(n){let o=co.get(n);o||co.set(n,o=[]),o.push(e)}}function Ll(e,t,n=we){const{immediate:o,deep:s,once:i,scheduler:r,augmentJob:a,call:u}=n,m=V=>s?V:ut(V)||s===!1||s===0?Ft(V,1):Ft(V);let p,b,F,D,G=!1,Q=!1;if(Fe(e)?(b=()=>e.value,G=ut(e)):Fn(e)?(b=()=>m(e),G=!0):ee(e)?(Q=!0,G=e.some(V=>Fn(V)||ut(V)),b=()=>e.map(V=>{if(Fe(V))return V.value;if(Fn(V))return m(V);if(Z(V))return u?u(V,2):V()})):Z(e)?t?b=u?()=>u(e,2):e:b=()=>{if(F){Mt();try{F()}finally{Pt()}}const V=Xt;Xt=p;try{return u?u(e,3,[D]):e(D)}finally{Xt=V}}:b=at,t&&s){const V=b,be=s===!0?1/0:s;b=()=>Ft(V(),be)}const te=Jr(),Y=()=>{p.stop(),te&&te.active&&os(te.effects,p)};if(i&&t){const V=t;t=(...be)=>{V(...be),Y()}}let de=Q?new Array(e.length).fill(so):so;const ie=V=>{if(!(!(p.flags&1)||!p.dirty&&!V))if(t){const be=p.run();if(s||G||(Q?be.some((Ie,Le)=>Bt(Ie,de[Le])):Bt(be,de))){F&&F();const Ie=Xt;Xt=p;try{const Le=[be,de===so?void 0:Q&&de[0]===so?[]:de,D];de=be,u?u(t,3,Le):t(...Le)}finally{Xt=Ie}}}else p.run()};return a&&a(ie),p=new wi(b),p.scheduler=r?()=>r(ie,!1):ie,D=V=>_l(V,!1,p),F=p.onStop=()=>{const V=co.get(p);if(V){if(u)u(V,4);else for(const be of V)be();co.delete(p)}},t?o?ie(!0):de=p.run():r?r(ie.bind(null,!0),!0):p.run(),Y.pause=p.pause.bind(p),Y.resume=p.resume.bind(p),Y.stop=Y,Y}function Ft(e,t=1/0,n){if(t<=0||!Te(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Fe(e))Ft(e.value,t,n);else if(ee(e))for(let o=0;o<e.length;o++)Ft(e[o],t,n);else if(Fr(e)||An(e))e.forEach(o=>{Ft(o,t,n)});else if(Ur(e)){for(const o in e)Ft(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Ft(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Jn(e,t,n,o){try{return o?e(...o):e()}catch(s){bo(s,t,n)}}function bt(e,t,n,o){if(Z(e)){const s=Jn(e,t,n,o);return s&&gi(s)&&s.catch(i=>{bo(i,t,n)}),s}if(ee(e)){const s=[];for(let i=0;i<e.length;i++)s.push(bt(e[i],t,n,o));return s}}function bo(e,t,n,o=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||we;if(t){let a=t.parent;const u=t.proxy,m=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const p=a.ec;if(p){for(let b=0;b<p.length;b++)if(p[b](e,u,m)===!1)return}a=a.parent}if(i){Mt(),Jn(i,null,10,[e,u,m]),Pt();return}}Rl(e,n,s,o,r)}function Rl(e,t,n,o=!0,s=!1){if(s)throw e;console.error(e)}const De=[];let gt=-1;const hn=[];let It=null,fn=0;const ki=Promise.resolve();let uo=null;function Tl(e){const t=uo||ki;return e?t.then(this?e.bind(this):e):t}function El(e){let t=gt+1,n=De.length;for(;t<n;){const o=t+n>>>1,s=De[o],i=Wn(s);i<e||i===e&&s.flags&2?t=o+1:n=o}return t}function gs(e){if(!(e.flags&1)){const t=Wn(e),n=De[De.length-1];!n||!(e.flags&2)&&t>=Wn(n)?De.push(e):De.splice(El(t),0,e),e.flags|=1,Ii()}}function Ii(){uo||(uo=ki.then(Fi))}function Cl(e){ee(e)?hn.push(...e):It&&e.id===-1?It.splice(fn+1,0,e):e.flags&1||(hn.push(e),e.flags|=1),Ii()}function Ns(e,t,n=gt+1){for(;n<De.length;n++){const o=De[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;De.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Oi(e){if(hn.length){const t=[...new Set(hn)].sort((n,o)=>Wn(n)-Wn(o));if(hn.length=0,It){It.push(...t);return}for(It=t,fn=0;fn<It.length;fn++){const n=It[fn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}It=null,fn=0}}const Wn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Fi(e){const t=at;try{for(gt=0;gt<De.length;gt++){const n=De[gt];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),Jn(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;gt<De.length;gt++){const n=De[gt];n&&(n.flags&=-2)}gt=-1,De.length=0,Oi(),uo=null,(De.length||hn.length)&&Fi()}}let wt=null,Bi=null;function fo(e){const t=wt;return wt=e,Bi=e&&e.type.__scopeId||null,t}function Ml(e,t=wt,n){if(!t||e._n)return e;const o=(...s)=>{o._d&&Ys(-1);const i=fo(t);let r;try{r=e(...s)}finally{fo(i),o._d&&Ys(1)}return r};return o._n=!0,o._c=!0,o._d=!0,o}function qt(e,t,n,o){const s=e.dirs,i=t&&t.dirs;for(let r=0;r<s.length;r++){const a=s[r];i&&(a.oldValue=i[r].value);let u=a.dir[o];u&&(Mt(),bt(u,n,8,[e.el,a,e,t]),Pt())}}const Pl=Symbol("_vte"),Hl=e=>e.__isTeleport,Al=Symbol("_leaveCb");function ys(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ys(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function kl(e,t){return Z(e)?(()=>ke({name:e.name},t,{setup:e}))():e}function ji(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ho=new WeakMap;function Bn(e,t,n,o,s=!1){if(ee(e)){e.forEach((G,Q)=>Bn(G,t&&(ee(t)?t[Q]:t),n,o,s));return}if(jn(o)&&!s){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Bn(e,t,n,o.component.subTree);return}const i=o.shapeFlag&4?vs(o.component):o.el,r=s?null:i,{i:a,r:u}=e,m=t&&t.r,p=a.refs===we?a.refs={}:a.refs,b=a.setupState,F=ue(b),D=b===we?pi:G=>fe(F,G);if(m!=null&&m!==u){if($s(t),Ye(m))p[m]=null,D(m)&&(b[m]=null);else if(Fe(m)){m.value=null;const G=t;G.k&&(p[G.k]=null)}}if(Z(u))Jn(u,a,12,[r,p]);else{const G=Ye(u),Q=Fe(u);if(G||Q){const te=()=>{if(e.f){const Y=G?D(u)?b[u]:p[u]:u.value;if(s)ee(Y)&&os(Y,i);else if(ee(Y))Y.includes(i)||Y.push(i);else if(G)p[u]=[i],D(u)&&(b[u]=p[u]);else{const de=[i];u.value=de,e.k&&(p[e.k]=de)}}else G?(p[u]=r,D(u)&&(b[u]=r)):Q&&(u.value=r,e.k&&(p[e.k]=r))};if(r){const Y=()=>{te(),ho.delete(e)};Y.id=-1,ho.set(e,Y),qe(Y,n)}else $s(e),te()}}}function $s(e){const t=ho.get(e);t&&(t.flags|=8,ho.delete(e))}wo().requestIdleCallback;wo().cancelIdleCallback;const jn=e=>!!e.type.__asyncLoader,Ui=e=>e.type.__isKeepAlive;function Il(e,t){Di(e,"a",t)}function Ol(e,t){Di(e,"da",t)}function Di(e,t,n=Ne){const o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(xo(t,o,n),n){let s=n.parent;for(;s&&s.parent;)Ui(s.parent.vnode)&&Fl(o,t,n,s),s=s.parent}}function Fl(e,t,n,o){const s=xo(t,e,o,!0);$i(()=>{os(o[t],s)},n)}function xo(e,t,n=Ne,o=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{Mt();const a=Yn(n),u=bt(t,n,e,r);return a(),Pt(),u});return o?s.unshift(i):s.push(i),i}}const Ht=e=>(t,n=Ne)=>{(!Vn||e==="sp")&&xo(e,(...o)=>t(...o),n)},Bl=Ht("bm"),Ni=Ht("m"),jl=Ht("bu"),Ul=Ht("u"),Dl=Ht("bum"),$i=Ht("um"),Nl=Ht("sp"),$l=Ht("rtg"),Wl=Ht("rtc");function Gl(e,t=Ne){xo("ec",e,t)}const Vl=Symbol.for("v-ndc"),Yo=e=>e?lr(e)?vs(e):Yo(e.parent):null,Un=ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Yo(e.parent),$root:e=>Yo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ws(e),$forceUpdate:e=>e.f||(e.f=()=>{gs(e.update)}),$nextTick:e=>e.n||(e.n=Tl.bind(e.proxy)),$watch:e=>ha.bind(e)}),jo=(e,t)=>e!==we&&!e.__isScriptSetup&&fe(e,t),Kl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:s,props:i,accessCache:r,type:a,appContext:u}=e;let m;if(t[0]!=="$"){const D=r[t];if(D!==void 0)switch(D){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(jo(o,t))return r[t]=1,o[t];if(s!==we&&fe(s,t))return r[t]=2,s[t];if((m=e.propsOptions[0])&&fe(m,t))return r[t]=3,i[t];if(n!==we&&fe(n,t))return r[t]=4,n[t];Xo&&(r[t]=0)}}const p=Un[t];let b,F;if(p)return t==="$attrs"&&Oe(e.attrs,"get",""),p(e);if((b=a.__cssModules)&&(b=b[t]))return b;if(n!==we&&fe(n,t))return r[t]=4,n[t];if(F=u.config.globalProperties,fe(F,t))return F[t]},set({_:e},t,n){const{data:o,setupState:s,ctx:i}=e;return jo(s,t)?(s[t]=n,!0):o!==we&&fe(o,t)?(o[t]=n,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,propsOptions:i,type:r}},a){let u,m;return!!(n[a]||e!==we&&a[0]!=="$"&&fe(e,a)||jo(t,a)||(u=i[0])&&fe(u,a)||fe(o,a)||fe(Un,a)||fe(s.config.globalProperties,a)||(m=r.__cssModules)&&m[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:fe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Ws(e){return ee(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Xo=!0;function zl(e){const t=ws(e),n=e.proxy,o=e.ctx;Xo=!1,t.beforeCreate&&Gs(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:r,watch:a,provide:u,inject:m,created:p,beforeMount:b,mounted:F,beforeUpdate:D,updated:G,activated:Q,deactivated:te,beforeDestroy:Y,beforeUnmount:de,destroyed:ie,unmounted:V,render:be,renderTracked:Ie,renderTriggered:Le,errorCaptured:nt,serverPrefetch:Ut,expose:Ge,inheritAttrs:ot,components:tn,directives:nn,filters:Dt}=t;if(m&&ql(m,o,null),r)for(const xe in r){const he=r[xe];Z(he)&&(o[xe]=he.bind(n))}if(s){const xe=s.call(n,n);Te(xe)&&(e.data=hs(xe))}if(Xo=!0,i)for(const xe in i){const he=i[xe],st=Z(he)?he.bind(n,n):Z(he.get)?he.get.bind(n,n):at,xt=!Z(he)&&Z(he.set)?he.set.bind(n):at,St=Ua({get:st,set:xt});Object.defineProperty(o,xe,{enumerable:!0,configurable:!0,get:()=>St.value,set:Xe=>St.value=Xe})}if(a)for(const xe in a)Wi(a[xe],o,n,xe);if(u){const xe=Z(u)?u.call(n):u;Reflect.ownKeys(xe).forEach(he=>{ea(he,xe[he])})}p&&Gs(p,e,"c");function He(xe,he){ee(he)?he.forEach(st=>xe(st.bind(n))):he&&xe(he.bind(n))}if(He(Bl,b),He(Ni,F),He(jl,D),He(Ul,G),He(Il,Q),He(Ol,te),He(Gl,nt),He(Wl,Ie),He($l,Le),He(Dl,de),He($i,V),He(Nl,Ut),ee(Ge))if(Ge.length){const xe=e.exposed||(e.exposed={});Ge.forEach(he=>{Object.defineProperty(xe,he,{get:()=>n[he],set:st=>n[he]=st,enumerable:!0})})}else e.exposed||(e.exposed={});be&&e.render===at&&(e.render=be),ot!=null&&(e.inheritAttrs=ot),tn&&(e.components=tn),nn&&(e.directives=nn),Ut&&ji(e)}function ql(e,t,n=at){ee(e)&&(e=Qo(e));for(const o in e){const s=e[o];let i;Te(s)?"default"in s?i=io(s.from||o,s.default,!0):i=io(s.from||o):i=io(s),Fe(i)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:r=>i.value=r}):t[o]=i}}function Gs(e,t,n){bt(ee(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wi(e,t,n,o){let s=o.includes(".")?nr(n,o):()=>n[o];if(Ye(e)){const i=t[e];Z(i)&&Do(s,i)}else if(Z(e))Do(s,e.bind(n));else if(Te(e))if(ee(e))e.forEach(i=>Wi(i,t,n,o));else{const i=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(i)&&Do(s,i,e)}}function ws(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:r}}=e.appContext,a=i.get(t);let u;return a?u=a:!s.length&&!n&&!o?u=t:(u={},s.length&&s.forEach(m=>po(u,m,r,!0)),po(u,t,r)),Te(t)&&i.set(t,u),u}function po(e,t,n,o=!1){const{mixins:s,extends:i}=t;i&&po(e,i,n,!0),s&&s.forEach(r=>po(e,r,n,!0));for(const r in t)if(!(o&&r==="expose")){const a=Jl[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const Jl={data:Vs,props:Ks,emits:Ks,methods:Mn,computed:Mn,beforeCreate:je,created:je,beforeMount:je,mounted:je,beforeUpdate:je,updated:je,beforeDestroy:je,beforeUnmount:je,destroyed:je,unmounted:je,activated:je,deactivated:je,errorCaptured:je,serverPrefetch:je,components:Mn,directives:Mn,watch:Xl,provide:Vs,inject:Yl};function Vs(e,t){return t?e?function(){return ke(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function Yl(e,t){return Mn(Qo(e),Qo(t))}function Qo(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function je(e,t){return e?[...new Set([].concat(e,t))]:t}function Mn(e,t){return e?ke(Object.create(null),e,t):t}function Ks(e,t){return e?ee(e)&&ee(t)?[...new Set([...e,...t])]:ke(Object.create(null),Ws(e),Ws(t??{})):t}function Xl(e,t){if(!e)return t;if(!t)return e;const n=ke(Object.create(null),e);for(const o in t)n[o]=je(e[o],t[o]);return n}function Gi(){return{app:null,config:{isNativeTag:pi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ql=0;function Zl(e,t){return function(o,s=null){Z(o)||(o=ke({},o)),s!=null&&!Te(s)&&(s=null);const i=Gi(),r=new WeakSet,a=[];let u=!1;const m=i.app={_uid:Ql++,_component:o,_props:s,_container:null,_context:i,_instance:null,version:Da,get config(){return i.config},set config(p){},use(p,...b){return r.has(p)||(p&&Z(p.install)?(r.add(p),p.install(m,...b)):Z(p)&&(r.add(p),p(m,...b))),m},mixin(p){return i.mixins.includes(p)||i.mixins.push(p),m},component(p,b){return b?(i.components[p]=b,m):i.components[p]},directive(p,b){return b?(i.directives[p]=b,m):i.directives[p]},mount(p,b,F){if(!u){const D=m._ceVNode||jt(o,s);return D.appContext=i,F===!0?F="svg":F===!1&&(F=void 0),b&&t?t(D,p):e(D,p,F),u=!0,m._container=p,p.__vue_app__=m,vs(D.component)}},onUnmount(p){a.push(p)},unmount(){u&&(bt(a,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(p,b){return i.provides[p]=b,m},runWithContext(p){const b=pn;pn=m;try{return p()}finally{pn=b}}};return m}}let pn=null;function ea(e,t){if(Ne){let n=Ne.provides;const o=Ne.parent&&Ne.parent.provides;o===n&&(n=Ne.provides=Object.create(o)),n[e]=t}}function io(e,t,n=!1){const o=Pn();if(o||pn){let s=pn?pn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&Z(t)?t.call(o&&o.proxy):t}}const Vi={},Ki=()=>Object.create(Vi),zi=e=>Object.getPrototypeOf(e)===Vi;function ta(e,t,n,o=!1){const s={},i=Ki();e.propsDefaults=Object.create(null),qi(e,t,s,i);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);n?e.props=o?s:pl(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function na(e,t,n,o){const{props:s,attrs:i,vnode:{patchFlag:r}}=e,a=ue(s),[u]=e.propsOptions;let m=!1;if((o||r>0)&&!(r&16)){if(r&8){const p=e.vnode.dynamicProps;for(let b=0;b<p.length;b++){let F=p[b];if(So(e.emitsOptions,F))continue;const D=t[F];if(u)if(fe(i,F))D!==i[F]&&(i[F]=D,m=!0);else{const G=Zt(F);s[G]=Zo(u,a,G,D,e,!1)}else D!==i[F]&&(i[F]=D,m=!0)}}}else{qi(e,t,s,i)&&(m=!0);let p;for(const b in a)(!t||!fe(t,b)&&((p=qn(b))===b||!fe(t,p)))&&(u?n&&(n[b]!==void 0||n[p]!==void 0)&&(s[b]=Zo(u,a,b,void 0,e,!0)):delete s[b]);if(i!==a)for(const b in i)(!t||!fe(t,b))&&(delete i[b],m=!0)}m&&Ct(e.attrs,"set","")}function qi(e,t,n,o){const[s,i]=e.propsOptions;let r=!1,a;if(t)for(let u in t){if(kn(u))continue;const m=t[u];let p;s&&fe(s,p=Zt(u))?!i||!i.includes(p)?n[p]=m:(a||(a={}))[p]=m:So(e.emitsOptions,u)||(!(u in o)||m!==o[u])&&(o[u]=m,r=!0)}if(i){const u=ue(n),m=a||we;for(let p=0;p<i.length;p++){const b=i[p];n[b]=Zo(s,u,b,m[b],e,!fe(m,b))}}return r}function Zo(e,t,n,o,s,i){const r=e[n];if(r!=null){const a=fe(r,"default");if(a&&o===void 0){const u=r.default;if(r.type!==Function&&!r.skipFactory&&Z(u)){const{propsDefaults:m}=s;if(n in m)o=m[n];else{const p=Yn(s);o=m[n]=u.call(null,t),p()}}else o=u;s.ce&&s.ce._setProp(n,o)}r[0]&&(i&&!a?o=!1:r[1]&&(o===""||o===qn(n))&&(o=!0))}return o}const oa=new WeakMap;function Ji(e,t,n=!1){const o=n?oa:t.propsCache,s=o.get(e);if(s)return s;const i=e.props,r={},a=[];let u=!1;if(!Z(e)){const p=b=>{u=!0;const[F,D]=Ji(b,t,!0);ke(r,F),D&&a.push(...D)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!i&&!u)return Te(e)&&o.set(e,dn),dn;if(ee(i))for(let p=0;p<i.length;p++){const b=Zt(i[p]);zs(b)&&(r[b]=we)}else if(i)for(const p in i){const b=Zt(p);if(zs(b)){const F=i[p],D=r[b]=ee(F)||Z(F)?{type:F}:ke({},F),G=D.type;let Q=!1,te=!0;if(ee(G))for(let Y=0;Y<G.length;++Y){const de=G[Y],ie=Z(de)&&de.name;if(ie==="Boolean"){Q=!0;break}else ie==="String"&&(te=!1)}else Q=Z(G)&&G.name==="Boolean";D[0]=Q,D[1]=te,(Q||fe(D,"default"))&&a.push(b)}}const m=[r,a];return Te(e)&&o.set(e,m),m}function zs(e){return e[0]!=="$"&&!kn(e)}const bs=e=>e==="_"||e==="_ctx"||e==="$stable",xs=e=>ee(e)?e.map(yt):[yt(e)],sa=(e,t,n)=>{if(t._n)return t;const o=Ml((...s)=>xs(t(...s)),n);return o._c=!1,o},Yi=(e,t,n)=>{const o=e._ctx;for(const s in e){if(bs(s))continue;const i=e[s];if(Z(i))t[s]=sa(s,i,o);else if(i!=null){const r=xs(i);t[s]=()=>r}}},Xi=(e,t)=>{const n=xs(t);e.slots.default=()=>n},Qi=(e,t,n)=>{for(const o in t)(n||!bs(o))&&(e[o]=t[o])},ia=(e,t,n)=>{const o=e.slots=Ki();if(e.vnode.shapeFlag&32){const s=t._;s?(Qi(o,t,n),n&&yi(o,"_",s,!0)):Yi(t,o)}else t&&Xi(e,t)},ra=(e,t,n)=>{const{vnode:o,slots:s}=e;let i=!0,r=we;if(o.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:Qi(s,t,n):(i=!t.$stable,Yi(t,s)),r=t}else t&&(Xi(e,t),r={default:1});if(i)for(const a in s)!bs(a)&&r[a]==null&&delete s[a]},qe=Sa;function la(e){return aa(e)}function aa(e,t){const n=wo();n.__VUE__=!0;const{insert:o,remove:s,patchProp:i,createElement:r,createText:a,createComment:u,setText:m,setElementText:p,parentNode:b,nextSibling:F,setScopeId:D=at,insertStaticContent:G}=e,Q=(l,f,g,L=null,x=null,S=null,h=void 0,A=null,P=!!f.dynamicChildren)=>{if(l===f)return;l&&!En(l,f)&&(L=re(l),Xe(l,x,S,!0),l=null),f.patchFlag===-2&&(P=!1,f.dynamicChildren=null);const{type:R,ref:N,shapeFlag:I}=f;switch(R){case vo:te(l,f,g,L);break;case mn:Y(l,f,g,L);break;case ro:l==null&&de(f,g,L,h);break;case Et:tn(l,f,g,L,x,S,h,A,P);break;default:I&1?be(l,f,g,L,x,S,h,A,P):I&6?nn(l,f,g,L,x,S,h,A,P):(I&64||I&128)&&R.process(l,f,g,L,x,S,h,A,P,it)}N!=null&&x?Bn(N,l&&l.ref,S,f||l,!f):N==null&&l&&l.ref!=null&&Bn(l.ref,null,S,l,!0)},te=(l,f,g,L)=>{if(l==null)o(f.el=a(f.children),g,L);else{const x=f.el=l.el;f.children!==l.children&&m(x,f.children)}},Y=(l,f,g,L)=>{l==null?o(f.el=u(f.children||""),g,L):f.el=l.el},de=(l,f,g,L)=>{[l.el,l.anchor]=G(l.children,f,g,L,l.el,l.anchor)},ie=({el:l,anchor:f},g,L)=>{let x;for(;l&&l!==f;)x=F(l),o(l,g,L),l=x;o(f,g,L)},V=({el:l,anchor:f})=>{let g;for(;l&&l!==f;)g=F(l),s(l),l=g;s(f)},be=(l,f,g,L,x,S,h,A,P)=>{f.type==="svg"?h="svg":f.type==="math"&&(h="mathml"),l==null?Ie(f,g,L,x,S,h,A,P):Ut(l,f,x,S,h,A,P)},Ie=(l,f,g,L,x,S,h,A)=>{let P,R;const{props:N,shapeFlag:I,transition:U,dirs:K}=l;if(P=l.el=r(l.type,S,N&&N.is,N),I&8?p(P,l.children):I&16&&nt(l.children,P,null,L,x,Uo(l,S),h,A),K&&qt(l,null,L,"created"),Le(P,l,l.scopeId,h,L),N){for(const X in N)X!=="value"&&!kn(X)&&i(P,X,null,N[X],S,L);"value"in N&&i(P,"value",null,N.value,S),(R=N.onVnodeBeforeMount)&&mt(R,L,l)}K&&qt(l,null,L,"beforeMount");const ne=ca(x,U);ne&&U.beforeEnter(P),o(P,f,g),((R=N&&N.onVnodeMounted)||ne||K)&&qe(()=>{R&&mt(R,L,l),ne&&U.enter(P),K&&qt(l,null,L,"mounted")},x)},Le=(l,f,g,L,x)=>{if(g&&D(l,g),L)for(let S=0;S<L.length;S++)D(l,L[S]);if(x){let S=x.subTree;if(f===S||sr(S.type)&&(S.ssContent===f||S.ssFallback===f)){const h=x.vnode;Le(l,h,h.scopeId,h.slotScopeIds,x.parent)}}},nt=(l,f,g,L,x,S,h,A,P=0)=>{for(let R=P;R<l.length;R++){const N=l[R]=A?Ot(l[R]):yt(l[R]);Q(null,N,f,g,L,x,S,h,A)}},Ut=(l,f,g,L,x,S,h)=>{const A=f.el=l.el;let{patchFlag:P,dynamicChildren:R,dirs:N}=f;P|=l.patchFlag&16;const I=l.props||we,U=f.props||we;let K;if(g&&Jt(g,!1),(K=U.onVnodeBeforeUpdate)&&mt(K,g,f,l),N&&qt(f,l,g,"beforeUpdate"),g&&Jt(g,!0),(I.innerHTML&&U.innerHTML==null||I.textContent&&U.textContent==null)&&p(A,""),R?Ge(l.dynamicChildren,R,A,g,L,Uo(f,x),S):h||he(l,f,A,null,g,L,Uo(f,x),S,!1),P>0){if(P&16)ot(A,I,U,g,x);else if(P&2&&I.class!==U.class&&i(A,"class",null,U.class,x),P&4&&i(A,"style",I.style,U.style,x),P&8){const ne=f.dynamicProps;for(let X=0;X<ne.length;X++){const z=ne[X],le=I[z],pe=U[z];(pe!==le||z==="value")&&i(A,z,le,pe,x,g)}}P&1&&l.children!==f.children&&p(A,f.children)}else!h&&R==null&&ot(A,I,U,g,x);((K=U.onVnodeUpdated)||N)&&qe(()=>{K&&mt(K,g,f,l),N&&qt(f,l,g,"updated")},L)},Ge=(l,f,g,L,x,S,h)=>{for(let A=0;A<f.length;A++){const P=l[A],R=f[A],N=P.el&&(P.type===Et||!En(P,R)||P.shapeFlag&198)?b(P.el):g;Q(P,R,N,null,L,x,S,h,!0)}},ot=(l,f,g,L,x)=>{if(f!==g){if(f!==we)for(const S in f)!kn(S)&&!(S in g)&&i(l,S,f[S],null,x,L);for(const S in g){if(kn(S))continue;const h=g[S],A=f[S];h!==A&&S!=="value"&&i(l,S,A,h,x,L)}"value"in g&&i(l,"value",f.value,g.value,x)}},tn=(l,f,g,L,x,S,h,A,P)=>{const R=f.el=l?l.el:a(""),N=f.anchor=l?l.anchor:a("");let{patchFlag:I,dynamicChildren:U,slotScopeIds:K}=f;K&&(A=A?A.concat(K):K),l==null?(o(R,g,L),o(N,g,L),nt(f.children||[],g,N,x,S,h,A,P)):I>0&&I&64&&U&&l.dynamicChildren?(Ge(l.dynamicChildren,U,g,x,S,h,A),(f.key!=null||x&&f===x.subTree)&&Zi(l,f,!0)):he(l,f,g,N,x,S,h,A,P)},nn=(l,f,g,L,x,S,h,A,P)=>{f.slotScopeIds=A,l==null?f.shapeFlag&512?x.ctx.activate(f,g,L,h,P):Dt(f,g,L,x,S,h,P):yn(l,f,P)},Dt=(l,f,g,L,x,S,h)=>{const A=l.component=ka(l,L,x);if(Ui(l)&&(A.ctx.renderer=it),Ia(A,!1,h),A.asyncDep){if(x&&x.registerDep(A,He,h),!l.el){const P=A.subTree=jt(mn);Y(null,P,f,g),l.placeholder=P.el}}else He(A,l,f,g,x,S,h)},yn=(l,f,g)=>{const L=f.component=l.component;if(ba(l,f,g))if(L.asyncDep&&!L.asyncResolved){xe(L,f,g);return}else L.next=f,L.update();else f.el=l.el,L.vnode=f},He=(l,f,g,L,x,S,h)=>{const A=()=>{if(l.isMounted){let{next:I,bu:U,u:K,parent:ne,vnode:X}=l;{const Be=er(l);if(Be){I&&(I.el=X.el,xe(l,I,h)),Be.asyncDep.then(()=>{l.isUnmounted||A()});return}}let z=I,le;Jt(l,!1),I?(I.el=X.el,xe(l,I,h)):I=X,U&&Io(U),(le=I.props&&I.props.onVnodeBeforeUpdate)&&mt(le,ne,I,X),Jt(l,!0);const pe=No(l),Me=l.subTree;l.subTree=pe,Q(Me,pe,b(Me.el),re(Me),l,x,S),I.el=pe.el,z===null&&xa(l,pe.el),K&&qe(K,x),(le=I.props&&I.props.onVnodeUpdated)&&qe(()=>mt(le,ne,I,X),x)}else{let I;const{el:U,props:K}=f,{bm:ne,m:X,parent:z,root:le,type:pe}=l,Me=jn(f);if(Jt(l,!1),ne&&Io(ne),!Me&&(I=K&&K.onVnodeBeforeMount)&&mt(I,z,f),Jt(l,!0),U&&At){const Be=()=>{l.subTree=No(l),At(U,l.subTree,l,x,null)};Me&&pe.__asyncHydrate?pe.__asyncHydrate(U,l,Be):Be()}else{le.ce&&le.ce._def.shadowRoot!==!1&&le.ce._injectChildStyle(pe);const Be=l.subTree=No(l);Q(null,Be,g,L,l,x,S),f.el=Be.el}if(X&&qe(X,x),!Me&&(I=K&&K.onVnodeMounted)){const Be=f;qe(()=>mt(I,z,Be),x)}(f.shapeFlag&256||z&&jn(z.vnode)&&z.vnode.shapeFlag&256)&&l.a&&qe(l.a,x),l.isMounted=!0,f=g=L=null}};l.scope.on();const P=l.effect=new wi(A);l.scope.off();const R=l.update=P.run.bind(P),N=l.job=P.runIfDirty.bind(P);N.i=l,N.id=l.uid,P.scheduler=()=>gs(N),Jt(l,!0),R()},xe=(l,f,g)=>{f.component=l;const L=l.vnode.props;l.vnode=f,l.next=null,na(l,f.props,L,g),ra(l,f.children,g),Mt(),Ns(l),Pt()},he=(l,f,g,L,x,S,h,A,P=!1)=>{const R=l&&l.children,N=l?l.shapeFlag:0,I=f.children,{patchFlag:U,shapeFlag:K}=f;if(U>0){if(U&128){xt(R,I,g,L,x,S,h,A,P);return}else if(U&256){st(R,I,g,L,x,S,h,A,P);return}}K&8?(N&16&&ft(R,x,S),I!==R&&p(g,I)):N&16?K&16?xt(R,I,g,L,x,S,h,A,P):ft(R,x,S,!0):(N&8&&p(g,""),K&16&&nt(I,g,L,x,S,h,A,P))},st=(l,f,g,L,x,S,h,A,P)=>{l=l||dn,f=f||dn;const R=l.length,N=f.length,I=Math.min(R,N);let U;for(U=0;U<I;U++){const K=f[U]=P?Ot(f[U]):yt(f[U]);Q(l[U],K,g,null,x,S,h,A,P)}R>N?ft(l,x,S,!0,!1,I):nt(f,g,L,x,S,h,A,P,I)},xt=(l,f,g,L,x,S,h,A,P)=>{let R=0;const N=f.length;let I=l.length-1,U=N-1;for(;R<=I&&R<=U;){const K=l[R],ne=f[R]=P?Ot(f[R]):yt(f[R]);if(En(K,ne))Q(K,ne,g,null,x,S,h,A,P);else break;R++}for(;R<=I&&R<=U;){const K=l[I],ne=f[U]=P?Ot(f[U]):yt(f[U]);if(En(K,ne))Q(K,ne,g,null,x,S,h,A,P);else break;I--,U--}if(R>I){if(R<=U){const K=U+1,ne=K<N?f[K].el:L;for(;R<=U;)Q(null,f[R]=P?Ot(f[R]):yt(f[R]),g,ne,x,S,h,A,P),R++}}else if(R>U)for(;R<=I;)Xe(l[R],x,S,!0),R++;else{const K=R,ne=R,X=new Map;for(R=ne;R<=U;R++){const Se=f[R]=P?Ot(f[R]):yt(f[R]);Se.key!=null&&X.set(Se.key,R)}let z,le=0;const pe=U-ne+1;let Me=!1,Be=0;const $t=new Array(pe);for(R=0;R<pe;R++)$t[R]=0;for(R=K;R<=I;R++){const Se=l[R];if(le>=pe){Xe(Se,x,S,!0);continue}let Ve;if(Se.key!=null)Ve=X.get(Se.key);else for(z=ne;z<=U;z++)if($t[z-ne]===0&&En(Se,f[z])){Ve=z;break}Ve===void 0?Xe(Se,x,S,!0):($t[Ve-ne]=R+1,Ve>=Be?Be=Ve:Me=!0,Q(Se,f[Ve],g,null,x,S,h,A,P),le++)}const Re=Me?ua($t):dn;for(z=Re.length-1,R=pe-1;R>=0;R--){const Se=ne+R,Ve=f[Se],Qe=f[Se+1],Wt=Se+1<N?Qe.el||Qe.placeholder:L;$t[R]===0?Q(null,Ve,g,Wt,x,S,h,A,P):Me&&(z<0||R!==Re[z]?St(Ve,g,Wt,2):z--)}}},St=(l,f,g,L,x=null)=>{const{el:S,type:h,transition:A,children:P,shapeFlag:R}=l;if(R&6){St(l.component.subTree,f,g,L);return}if(R&128){l.suspense.move(f,g,L);return}if(R&64){h.move(l,f,g,it);return}if(h===Et){o(S,f,g);for(let I=0;I<P.length;I++)St(P[I],f,g,L);o(l.anchor,f,g);return}if(h===ro){ie(l,f,g);return}if(L!==2&&R&1&&A)if(L===0)A.beforeEnter(S),o(S,f,g),qe(()=>A.enter(S),x);else{const{leave:I,delayLeave:U,afterLeave:K}=A,ne=()=>{l.ctx.isUnmounted?s(S):o(S,f,g)},X=()=>{S._isLeaving&&S[Al](!0),I(S,()=>{ne(),K&&K()})};U?U(S,ne,X):X()}else o(S,f,g)},Xe=(l,f,g,L=!1,x=!1)=>{const{type:S,props:h,ref:A,children:P,dynamicChildren:R,shapeFlag:N,patchFlag:I,dirs:U,cacheIndex:K}=l;if(I===-2&&(x=!1),A!=null&&(Mt(),Bn(A,null,g,l,!0),Pt()),K!=null&&(f.renderCache[K]=void 0),N&256){f.ctx.deactivate(l);return}const ne=N&1&&U,X=!jn(l);let z;if(X&&(z=h&&h.onVnodeBeforeUnmount)&&mt(z,f,l),N&6)sn(l.component,g,L);else{if(N&128){l.suspense.unmount(g,L);return}ne&&qt(l,null,f,"beforeUnmount"),N&64?l.type.remove(l,f,g,it,L):R&&!R.hasOnce&&(S!==Et||I>0&&I&64)?ft(R,f,g,!1,!0):(S===Et&&I&384||!x&&N&16)&&ft(P,f,g),L&&on(l)}(X&&(z=h&&h.onVnodeUnmounted)||ne)&&qe(()=>{z&&mt(z,f,l),ne&&qt(l,null,f,"unmounted")},g)},on=l=>{const{type:f,el:g,anchor:L,transition:x}=l;if(f===Et){wn(g,L);return}if(f===ro){V(l);return}const S=()=>{s(g),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(l.shapeFlag&1&&x&&!x.persisted){const{leave:h,delayLeave:A}=x,P=()=>h(g,S);A?A(l.el,S,P):P()}else S()},wn=(l,f)=>{let g;for(;l!==f;)g=F(l),s(l),l=g;s(f)},sn=(l,f,g)=>{const{bum:L,scope:x,job:S,subTree:h,um:A,m:P,a:R}=l;qs(P),qs(R),L&&Io(L),x.stop(),S&&(S.flags|=8,Xe(h,l,f,g)),A&&qe(A,f),qe(()=>{l.isUnmounted=!0},f)},ft=(l,f,g,L=!1,x=!1,S=0)=>{for(let h=S;h<l.length;h++)Xe(l[h],f,g,L,x)},re=l=>{if(l.shapeFlag&6)return re(l.component.subTree);if(l.shapeFlag&128)return l.suspense.next();const f=F(l.anchor||l.el),g=f&&f[Pl];return g?F(g):f};let Ee=!1;const Ce=(l,f,g)=>{l==null?f._vnode&&Xe(f._vnode,null,null,!0):Q(f._vnode||null,l,f,null,null,null,g),f._vnode=l,Ee||(Ee=!0,Ns(),Oi(),Ee=!1)},it={p:Q,um:Xe,m:St,r:on,mt:Dt,mc:nt,pc:he,pbc:Ge,n:re,o:e};let Nt,At;return t&&([Nt,At]=t(it)),{render:Ce,hydrate:Nt,createApp:Zl(Ce,Nt)}}function Uo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Jt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ca(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Zi(e,t,n=!1){const o=e.children,s=t.children;if(ee(o)&&ee(s))for(let i=0;i<o.length;i++){const r=o[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ot(s[i]),a.el=r.el),!n&&a.patchFlag!==-2&&Zi(r,a)),a.type===vo&&a.patchFlag!==-1&&(a.el=r.el),a.type===mn&&!a.el&&(a.el=r.el)}}function ua(e){const t=e.slice(),n=[0];let o,s,i,r,a;const u=e.length;for(o=0;o<u;o++){const m=e[o];if(m!==0){if(s=n[n.length-1],e[s]<m){t[o]=s,n.push(o);continue}for(i=0,r=n.length-1;i<r;)a=i+r>>1,e[n[a]]<m?i=a+1:r=a;m<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}for(i=n.length,r=n[i-1];i-- >0;)n[i]=r,r=t[r];return n}function er(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:er(t)}function qs(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const fa=Symbol.for("v-scx"),da=()=>io(fa);function Do(e,t,n){return tr(e,t,n)}function tr(e,t,n=we){const{immediate:o,deep:s,flush:i,once:r}=n,a=ke({},n),u=t&&o||!t&&i!=="post";let m;if(Vn){if(i==="sync"){const D=da();m=D.__watcherHandles||(D.__watcherHandles=[])}else if(!u){const D=()=>{};return D.stop=at,D.resume=at,D.pause=at,D}}const p=Ne;a.call=(D,G,Q)=>bt(D,p,G,Q);let b=!1;i==="post"?a.scheduler=D=>{qe(D,p&&p.suspense)}:i!=="sync"&&(b=!0,a.scheduler=(D,G)=>{G?D():gs(D)}),a.augmentJob=D=>{t&&(D.flags|=4),b&&(D.flags|=2,p&&(D.id=p.uid,D.i=p))};const F=Ll(e,t,a);return Vn&&(m?m.push(F):u&&F()),F}function ha(e,t,n){const o=this.proxy,s=Ye(e)?e.includes(".")?nr(o,e):()=>o[e]:e.bind(o,o);let i;Z(t)?i=t:(i=t.handler,n=t);const r=Yn(this),a=tr(s,i.bind(o),n);return r(),a}function nr(e,t){const n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}const pa=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Zt(t)}Modifiers`]||e[`${qn(t)}Modifiers`];function ma(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||we;let s=n;const i=t.startsWith("update:"),r=i&&pa(o,t.slice(7));r&&(r.trim&&(s=n.map(p=>Ye(p)?p.trim():p)),r.number&&(s=n.map(Wr)));let a,u=o[a=ko(t)]||o[a=ko(Zt(t))];!u&&i&&(u=o[a=ko(qn(t))]),u&&bt(u,e,6,s);const m=o[a+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,bt(m,e,6,s)}}const ga=new WeakMap;function or(e,t,n=!1){const o=n?ga:t.emitsCache,s=o.get(e);if(s!==void 0)return s;const i=e.emits;let r={},a=!1;if(!Z(e)){const u=m=>{const p=or(m,t,!0);p&&(a=!0,ke(r,p))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!a?(Te(e)&&o.set(e,null),null):(ee(i)?i.forEach(u=>r[u]=null):ke(r,i),Te(e)&&o.set(e,r),r)}function So(e,t){return!e||!ns(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,qn(t))||fe(e,t))}function No(e){const{type:t,vnode:n,proxy:o,withProxy:s,propsOptions:[i],slots:r,attrs:a,emit:u,render:m,renderCache:p,props:b,data:F,setupState:D,ctx:G,inheritAttrs:Q}=e,te=fo(e);let Y,de;try{if(n.shapeFlag&4){const V=s||o,be=V;Y=yt(m.call(be,V,p,b,D,F,G)),de=a}else{const V=t;Y=yt(V.length>1?V(b,{attrs:a,slots:r,emit:u}):V(b,null)),de=t.props?a:ya(a)}}catch(V){Dn.length=0,bo(V,e,1),Y=jt(mn)}let ie=Y;if(de&&Q!==!1){const V=Object.keys(de),{shapeFlag:be}=ie;V.length&&be&7&&(i&&V.some(mi)&&(de=wa(de,i)),ie=gn(ie,de,!1,!0))}return n.dirs&&(ie=gn(ie,null,!1,!0),ie.dirs=ie.dirs?ie.dirs.concat(n.dirs):n.dirs),n.transition&&ys(ie,n.transition),Y=ie,fo(te),Y}const ya=e=>{let t;for(const n in e)(n==="class"||n==="style"||ns(n))&&((t||(t={}))[n]=e[n]);return t},wa=(e,t)=>{const n={};for(const o in e)(!mi(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function ba(e,t,n){const{props:o,children:s,component:i}=e,{props:r,children:a,patchFlag:u}=t,m=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return o?Js(o,r,m):!!r;if(u&8){const p=t.dynamicProps;for(let b=0;b<p.length;b++){const F=p[b];if(r[F]!==o[F]&&!So(m,F))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:o===r?!1:o?r?Js(o,r,m):!0:!!r;return!1}function Js(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const i=o[s];if(t[i]!==e[i]&&!So(n,i))return!0}return!1}function xa({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const sr=e=>e.__isSuspense;function Sa(e,t){t&&t.pendingBranch?ee(e)?t.effects.push(...e):t.effects.push(e):Cl(e)}const Et=Symbol.for("v-fgt"),vo=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),ro=Symbol.for("v-stc"),Dn=[];let Je=null;function va(e=!1){Dn.push(Je=e?null:[])}function _a(){Dn.pop(),Je=Dn[Dn.length-1]||null}let Gn=1;function Ys(e,t=!1){Gn+=e,e<0&&Je&&t&&(Je.hasOnce=!0)}function La(e){return e.dynamicChildren=Gn>0?Je||dn:null,_a(),Gn>0&&Je&&Je.push(e),e}function Ra(e,t,n,o,s,i){return La(me(e,t,n,o,s,i,!0))}function ir(e){return e?e.__v_isVNode===!0:!1}function En(e,t){return e.type===t.type&&e.key===t.key}const rr=({key:e})=>e??null,lo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ye(e)||Fe(e)||Z(e)?{i:wt,r:e,k:t,f:!!n}:e:null);function me(e,t=null,n=null,o=0,s=null,i=e===Et?0:1,r=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rr(t),ref:t&&lo(t),scopeId:Bi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:wt};return a?(Ss(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Ye(n)?8:16),Gn>0&&!r&&Je&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Je.push(u),u}const jt=Ta;function Ta(e,t=null,n=null,o=0,s=null,i=!1){if((!e||e===Vl)&&(e=mn),ir(e)){const a=gn(e,t,!0);return n&&Ss(a,n),Gn>0&&!i&&Je&&(a.shapeFlag&6?Je[Je.indexOf(e)]=a:Je.push(a)),a.patchFlag=-2,a}if(ja(e)&&(e=e.__vccOpts),t){t=Ea(t);let{class:a,style:u}=t;a&&!Ye(a)&&(t.class=rs(a)),Te(u)&&(ms(u)&&!ee(u)&&(u=ke({},u)),t.style=is(u))}const r=Ye(e)?1:sr(e)?128:Hl(e)?64:Te(e)?4:Z(e)?2:0;return me(e,t,n,o,s,r,i,!0)}function Ea(e){return e?ms(e)||zi(e)?ke({},e):e:null}function gn(e,t,n=!1,o=!1){const{props:s,ref:i,patchFlag:r,children:a,transition:u}=e,m=t?Pa(s||{},t):s,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&rr(m),ref:t&&t.ref?n&&i?ee(i)?i.concat(lo(t)):[i,lo(t)]:lo(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Et?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gn(e.ssContent),ssFallback:e.ssFallback&&gn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&o&&ys(p,u.clone(p)),p}function Ca(e=" ",t=0){return jt(vo,null,e,t)}function Ma(e,t){const n=jt(ro,null,e);return n.staticCount=t,n}function yt(e){return e==null||typeof e=="boolean"?jt(mn):ee(e)?jt(Et,null,e.slice()):ir(e)?Ot(e):jt(vo,null,String(e))}function Ot(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gn(e)}function Ss(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ee(t))n=16;else if(typeof t=="object")if(o&65){const s=t.default;s&&(s._c&&(s._d=!1),Ss(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!zi(t)?t._ctx=wt:s===3&&wt&&(wt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:wt},n=32):(t=String(t),o&64?(n=16,t=[Ca(t)]):n=8);e.children=t,e.shapeFlag|=n}function Pa(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const s in o)if(s==="class")t.class!==o.class&&(t.class=rs([t.class,o.class]));else if(s==="style")t.style=is([t.style,o.style]);else if(ns(s)){const i=t[s],r=o[s];r&&i!==r&&!(ee(i)&&i.includes(r))&&(t[s]=i?[].concat(i,r):r)}else s!==""&&(t[s]=o[s])}return t}function mt(e,t,n,o=null){bt(e,t,7,[n,o])}const Ha=Gi();let Aa=0;function ka(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||Ha,i={uid:Aa++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qr(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ji(o,s),emitsOptions:or(o,s),emit:null,emitted:null,propsDefaults:we,inheritAttrs:o.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ma.bind(null,i),e.ce&&e.ce(i),i}let Ne=null;const Pn=()=>Ne||wt;let mo,es;{const e=wo(),t=(n,o)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(o),i=>{s.length>1?s.forEach(r=>r(i)):s[0](i)}};mo=t("__VUE_INSTANCE_SETTERS__",n=>Ne=n),es=t("__VUE_SSR_SETTERS__",n=>Vn=n)}const Yn=e=>{const t=Ne;return mo(e),e.scope.on(),()=>{e.scope.off(),mo(t)}},Xs=()=>{Ne&&Ne.scope.off(),mo(null)};function lr(e){return e.vnode.shapeFlag&4}let Vn=!1;function Ia(e,t=!1,n=!1){t&&es(t);const{props:o,children:s}=e.vnode,i=lr(e);ta(e,o,i,t),ia(e,s,n||t);const r=i?Oa(e,t):void 0;return t&&es(!1),r}function Oa(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Kl);const{setup:o}=n;if(o){Mt();const s=e.setupContext=o.length>1?Ba(e):null,i=Yn(e),r=Jn(o,e,0,[e.props,s]),a=gi(r);if(Pt(),i(),(a||e.sp)&&!jn(e)&&ji(e),a){if(r.then(Xs,Xs),t)return r.then(u=>{Qs(e,u,t)}).catch(u=>{bo(u,e,0)});e.asyncDep=r}else Qs(e,r,t)}else ar(e,t)}function Qs(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=Ai(t)),ar(e,n)}let Zs;function ar(e,t,n){const o=e.type;if(!e.render){if(!t&&Zs&&!o.render){const s=o.template||ws(e).template;if(s){const{isCustomElement:i,compilerOptions:r}=e.appContext.config,{delimiters:a,compilerOptions:u}=o,m=ke(ke({isCustomElement:i,delimiters:a},r),u);o.render=Zs(s,m)}}e.render=o.render||at}{const s=Yn(e);Mt();try{zl(e)}finally{Pt(),s()}}}const Fa={get(e,t){return Oe(e,"get",""),e[t]}};function Ba(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Fa),slots:e.slots,emit:e.emit,expose:t}}function vs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ai(ml(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Un)return Un[n](e)},has(t,n){return n in t||n in Un}})):e.proxy}function ja(e){return Z(e)&&"__vccOpts"in e}const Ua=(e,t)=>vl(e,t,Vn),Da="3.5.22";/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Na(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const $a=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Wa=e=>e.startsWith("onUpdate:"),Ga=Object.assign,cr=Array.isArray,ur=e=>typeof e=="function",Kn=e=>typeof e=="string",Va=e=>typeof e=="symbol",_s=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ka=/-\w/g,za=_s(e=>e.replace(Ka,t=>t.slice(1).toUpperCase())),qa=/\B([A-Z])/g,fr=_s(e=>e.replace(qa,"-$1").toLowerCase()),Ja=_s(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ya="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xa=Na(Ya);function dr(e){return!!e||e===""}/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ts;const ei=typeof window<"u"&&window.trustedTypes;if(ei)try{ts=ei.createPolicy("vue",{createHTML:e=>e})}catch{}const hr=ts?e=>ts.createHTML(e):e=>e,Qa="http://www.w3.org/2000/svg",Za="http://www.w3.org/1998/Math/MathML",Tt=typeof document<"u"?document:null,ti=Tt&&Tt.createElement("template"),ec={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const s=t==="svg"?Tt.createElementNS(Qa,e):t==="mathml"?Tt.createElementNS(Za,e):n?Tt.createElement(e,{is:n}):Tt.createElement(e);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>Tt.createTextNode(e),createComment:e=>Tt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Tt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,i){const r=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ti.innerHTML=hr(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const a=ti.content;if(o==="svg"||o==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},tc=Symbol("_vtc");function nc(e,t,n){const o=e[tc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ni=Symbol("_vod"),oc=Symbol("_vsh"),sc=Symbol(""),ic=/(?:^|;)\s*display\s*:/;function rc(e,t,n){const o=e.style,s=Kn(n);let i=!1;if(n&&!s){if(t)if(Kn(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();n[a]==null&&ao(o,a,"")}else for(const r in t)n[r]==null&&ao(o,r,"");for(const r in n)r==="display"&&(i=!0),ao(o,r,n[r])}else if(s){if(t!==n){const r=o[sc];r&&(n+=";"+r),o.cssText=n,i=ic.test(n)}}else t&&e.removeAttribute("style");ni in e&&(e[ni]=i?o.display:"",e[oc]&&(o.display="none"))}const oi=/\s*!important$/;function ao(e,t,n){if(cr(n))n.forEach(o=>ao(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=lc(e,t);oi.test(n)?e.setProperty(fr(o),n.replace(oi,""),"important"):e[o]=n}}const si=["Webkit","Moz","ms"],$o={};function lc(e,t){const n=$o[t];if(n)return n;let o=Zt(t);if(o!=="filter"&&o in e)return $o[t]=o;o=Ja(o);for(let s=0;s<si.length;s++){const i=si[s]+o;if(i in e)return $o[t]=i}return t}const ii="http://www.w3.org/1999/xlink";function ri(e,t,n,o,s,i=Xa(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ii,t.slice(6,t.length)):e.setAttributeNS(ii,t,n):n==null||i&&!dr(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Va(n)?String(n):n)}function li(e,t,n,o,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?hr(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=dr(n):n==null&&a==="string"?(n="",r=!0):a==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(s||t)}function ac(e,t,n,o){e.addEventListener(t,n,o)}function cc(e,t,n,o){e.removeEventListener(t,n,o)}const ai=Symbol("_vei");function uc(e,t,n,o,s=null){const i=e[ai]||(e[ai]={}),r=i[t];if(o&&r)r.value=o;else{const[a,u]=fc(t);if(o){const m=i[t]=pc(o,s);ac(e,a,m,u)}else r&&(cc(e,a,r,u),i[t]=void 0)}}const ci=/(?:Once|Passive|Capture)$/;function fc(e){let t;if(ci.test(e)){t={};let o;for(;o=e.match(ci);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fr(e.slice(2)),t]}let Wo=0;const dc=Promise.resolve(),hc=()=>Wo||(dc.then(()=>Wo=0),Wo=Date.now());function pc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;bt(mc(o,n.value),t,5,[o])};return n.value=e,n.attached=hc(),n}function mc(e,t){if(cr(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}const ui=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,gc=(e,t,n,o,s,i)=>{const r=s==="svg";t==="class"?nc(e,o,r):t==="style"?rc(e,n,o):$a(t)?Wa(t)||uc(e,t,n,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):yc(e,t,o,r))?(li(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ri(e,t,o,r,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Kn(o))?li(e,za(t),o,i,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ri(e,t,o,r))};function yc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ui(t)&&ur(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ui(t)&&Kn(n)?!1:t in e}const wc=Ga({patchProp:gc},ec);let fi;function bc(){return fi||(fi=la(wc))}const xc=(...e)=>{const t=bc().createApp(...e),{mount:n}=t;return t.mount=o=>{const s=vc(o);if(!s)return;const i=t._component;!ur(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const r=n(s,!1,Sc(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},t};function Sc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function vc(e){return Kn(e)?document.querySelector(e):e}const _c="modulepreload",Lc=function(e){return"/build/"+e},di={},Yt=function(t,n,o){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Lc(i),i in di)return;di[i]=!0;const r=i.endsWith(".css"),a=r?'[rel="stylesheet"]':"";if(!!o)for(let p=s.length-1;p>=0;p--){const b=s[p];if(b.href===i&&(!r||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const m=document.createElement("link");if(m.rel=r?"stylesheet":_c,r||(m.as="script",m.crossOrigin=""),m.href=i,document.head.appendChild(m),r)return new Promise((p,b)=>{m.addEventListener("load",p),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i})},Rc=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},Tc=kl({name:"EnjoyTalk3D",props:{heygenApiKey:{type:String,default:""},heygenServerUrl:{type:String,default:"https://api.heygen.com"},locale:{type:String,default:"it-IT"},teamLogo:{type:String,default:"/images/logoai.jpeg"}},data(){return{isListening:!1,advancedLipsyncOn:!1,heygenApiKey:this.heygenApiKey||"",heygenServerUrl:this.heygenServerUrl||"https://api.heygen.com",locale:this.locale||"it-IT",teamLogo:this.teamLogo||"/images/logoai.jpeg"}},mounted(){try{this.$el&&(console.log("EnjoyTalk3D mounted:",{dataset:this.$el.dataset,props:{heygenApiKey:this.heygenApiKey,heygenServerUrl:this.heygenServerUrl}}),this.heygenApiKey=this.heygenApiKey||this.$el.dataset.heygenApiKey||"",this.heygenServerUrl=this.heygenServerUrl||this.$el.dataset.heygenServerUrl||"https://api.heygen.com",this.locale=this.locale||this.$el.dataset.locale||"it-IT",this.teamLogo=this.teamLogo||this.$el.dataset.teamLogo||"/images/logoai.jpeg"),this.initLibraries().then(()=>{try{this.setupScene&&this.setupScene()}catch{}try{setTimeout(()=>{try{this.loadHumanoid&&this.loadHumanoid()}catch{}},0)}catch{}})}catch{}},beforeUnmount(){var e,t;try{typeof window<"u"&&window.speechSynthesis&&window.speechSynthesis.cancel()}catch{}try{typeof this._cleanup=="function"&&this._cleanup()}catch{}try{window.__enjoyTalkResizeObserver&&((t=(e=window.__enjoyTalkResizeObserver).disconnect)==null||t.call(e),window.__enjoyTalkResizeObserver=null)}catch{}},methods:{startStream(e){var t;try{return(t=this._startStream||this.startStreamFacade||this.startStreamImpl)==null?void 0:t(e)}catch{}},stopAllSpeechOutput(){var e;try{return(e=this._stopAllSpeechOutput)==null?void 0:e.call(this)}catch{}},ensureMicPermission(){var e;try{return(e=this._ensureMicPermission)==null?void 0:e.call(this)}catch{}},setListeningUI(e){var t;try{return(t=this._setListeningUI)==null?void 0:t.call(this,e)}catch{}},initUIBase(e,t){try{const n=m=>e&&e.querySelector?e.querySelector("#"+m):document.getElementById(m),o=n("#useVideoAvatar"),s=n("#useBrowserTts"),i=n("#browserTtsStatus"),r=n("#useAdvancedLipsync");o&&(o.checked=!1),"speechSynthesis"in window&&s&&(s.checked=!0,i&&(i.textContent="TTS browser attivo"));const a=navigator.userAgent||"";(!!window.chrome&&/Chrome\/\d+/.test(a)&&!/Edg\//.test(a)&&!/OPR\//.test(a)&&!/Brave/i.test(a)||t)&&r&&(r.checked=!0)}catch{}},async initLibraries(){const e=()=>new Promise(t=>{try{if(window.LivekitClient)return t();const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/livekit-client/dist/livekit-client.umd.min.js",n.async=!0,n.onload=()=>t(),n.onerror=()=>t(),document.head.appendChild(n)}catch{t()}});window.THREE_READY=(async()=>{try{const t=await Yt(()=>import("https://esm.sh/three@0.160.0"),[]),{GLTFLoader:n}=await Yt(()=>import("https://esm.sh/three@0.160.0/examples/jsm/loaders/GLTFLoader.js"),[]),{FBXLoader:o}=await Yt(()=>import("https://esm.sh/three@0.160.0/examples/jsm/loaders/FBXLoader.js"),[]);return window.THREE=t,window.GLTFLoader=n,window.FBXLoader=o,!0}catch{try{const n=await Yt(()=>import("https://unpkg.com/three@0.160.0/build/three.module.js"),[]),{GLTFLoader:o}=await Yt(()=>import("https://unpkg.com/three@0.160.0/examples/jsm/loaders/GLTFLoader.js?module"),[]),{FBXLoader:s}=await Yt(()=>import("https://unpkg.com/three@0.160.0/examples/jsm/loaders/FBXLoader.js?module"),[]),{OrbitControls:i}=await Yt(()=>import("https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js?module"),[]);return window.THREE=n,window.GLTFLoader=o,window.FBXLoader=s,window.OrbitControls=i,!0}catch{return!1}}})();try{window.THREE_READY&&window.THREE_READY.then&&await Promise.race([window.THREE_READY,new Promise(t=>setTimeout(t,3e3))])}catch{}await e()}},setup(e){const t=gl(null);let n=null,o=null;return Ni(async()=>{var ks,Is,Os,Fs;const s=Pn();n=(t==null?void 0:t.value)||s&&s.proxy&&s.proxy.$el||document.getElementById("enjoyTalk3D")||document.getElementById("enjoyTalkRoot");try{o=n&&n.getRootNode&&n.getRootNode().host?n.getRootNode().host:n}catch{o=n}const i=c=>n&&n.querySelector?n.querySelector("#"+c):document.getElementById(c);i("sendBtn");const r=i("micBtn"),a=i("textInput"),u=i("liveText"),m=i("ttsPlayer"),p=i("thinkingBubble"),b=i("useBrowserTts"),F=i("useVideoAvatar"),D=i("browserTtsStatus"),G=i("videoAvatarStatus"),Q=i("useAdvancedLipsync"),te=i("heygenVideo"),Y=i("heygenAudio"),de=window.location.pathname.split("/").pop(),ie=new URLSearchParams(window.location.search),V=ie.get("uuid"),be=e.locale||"it-IT",Ie=ie.get("debug")==="1",Le={apiKey:e.heygenApiKey||((ks=o==null?void 0:o.dataset)==null?void 0:ks.heygenApiKey)||"",serverUrl:e.heygenServerUrl||((Is=o==null?void 0:o.dataset)==null?void 0:Is.heygenServerUrl)||"https://api.heygen.com"},nt=(ie.get("avatar")||"").trim(),Ut=(ie.get("voice")||"").trim(),Ge=navigator.userAgent||"",ot=/Android/i.test(Ge),tn=!!window.chrome&&/Chrome\/\d+/.test(Ge)&&!/Edg\//.test(Ge)&&!/OPR\//.test(Ge)&&!/Brave/i.test(Ge),nn=(ie.get("lang")||"").trim(),Dt=(ie.get("jaw_axis")||"").toLowerCase(),yn=Dt==="y"||Dt==="z"?Dt:"x",He=(ie.get("jaw_sign")||"-1")==="1"?1:-1,xe=(ie.get("head_sign")||"-1")==="1"?1:-1,he=(ie.get("head_nod")||"").toLowerCase()==="1",st=parseFloat(ie.get("head_dist")||""),xt=parseFloat(ie.get("head_fov")||"");function St(c,w){try{const d=(c||"").replace("_","-").trim();if(!d)return w;const v=d.split("-");return v.length===1?v[0].toLowerCase():v[0].toLowerCase()+"-"+v[1].toUpperCase()}catch{return w}}try{s.proxy.setupScene=Rr}catch{}const Xe=(navigator.language||navigator.languages&&navigator.languages[0]||"").trim(),on=nn||be||Xe||"it-IT";let wn=St(on,"it-IT");try{(/^it(\b|[-_])/i.test(on)||on.toLowerCase()==="it")&&(wn="it-IT")}catch{}let sn=null,ft=null,re=null,Ee=null,Ce=null,it=!1,Nt=!1,At=null,l=null,f=null,g=null,L=null,x=null;const S=["Hips","Spine","Spine1","Spine2","Neck","Head","HeadTop_End","LeftEye","RightEye","LeftShoulder","LeftArm","LeftForeArm","LeftHand","LeftHandThumb1","LeftHandThumb2","LeftHandThumb3","LeftHandThumb4","LeftHandIndex1","LeftHandIndex2","LeftHandIndex3","LeftHandIndex4","LeftHandMiddle1","LeftHandMiddle2","LeftHandMiddle3","LeftHandMiddle4","LeftHandRing1","LeftHandRing2","LeftHandRing3","LeftHandRing4","LeftHandPinky1","LeftHandPinky2","LeftHandPinky3","LeftHandPinky4","RightShoulder","RightArm","RightForeArm","RightHand","RightHandThumb1","RightHandThumb2","RightHandThumb3","RightHandThumb4","RightHandIndex1","RightHandIndex2","RightHandIndex3","RightHandIndex4","RightHandMiddle1","RightHandMiddle2","RightHandMiddle3","RightHandMiddle4","RightHandRing1","RightHandRing2","RightHandRing3","RightHandRing4","RightHandPinky1","RightHandPinky2","RightHandPinky3","RightHandPinky4","LeftUpLeg","LeftLeg","LeftFoot","LeftToeBase","LeftToe_End","RightUpLeg","RightLeg","RightFoot","RightToeBase","RightToe_End"],h={};try{window.EnjoyBones||(window.EnjoyBones={get ready(){return Object.keys(h).length>0},get bones(){return h},get Hips(){return h.Hips},get Spine(){return h.Spine},get Spine1(){return h.Spine1},get Spine2(){return h.Spine2},get Neck(){return h.Neck},get Head(){return h.Head},get HeadTop_End(){return h.HeadTop_End},get LeftEye(){return h.LeftEye},get RightEye(){return h.RightEye},get LeftShoulder(){return h.LeftShoulder},get LeftArm(){return h.LeftArm},get LeftForeArm(){return h.LeftForeArm},get LeftHand(){return h.LeftHand},get LeftHandThumb1(){return h.LeftHandThumb1},get LeftHandThumb2(){return h.LeftHandThumb2},get LeftHandThumb3(){return h.LeftHandThumb3},get LeftHandThumb4(){return h.LeftHandThumb4},get LeftHandIndex1(){return h.LeftHandIndex1},get LeftHandIndex2(){return h.LeftHandIndex2},get LeftHandIndex3(){return h.LeftHandIndex3},get LeftHandIndex4(){return h.LeftHandIndex4},get LeftHandMiddle1(){return h.LeftHandMiddle1},get LeftHandMiddle2(){return h.LeftHandMiddle2},get LeftHandMiddle3(){return h.LeftHandMiddle3},get LeftHandMiddle4(){return h.LeftHandMiddle4},get LeftHandRing1(){return h.LeftHandRing1},get LeftHandRing2(){return h.LeftHandRing2},get LeftHandRing3(){return h.LeftHandRing3},get LeftHandRing4(){return h.LeftHandRing4},get LeftHandPinky1(){return h.LeftHandPinky1},get LeftHandPinky2(){return h.LeftHandPinky2},get LeftHandPinky3(){return h.LeftHandPinky3},get LeftHandPinky4(){return h.LeftHandPinky4},get RightShoulder(){return h.RightShoulder},get RightArm(){return h.RightArm},get RightForeArm(){return h.RightForeArm},get RightHand(){return h.RightHand},get RightHandThumb1(){return h.RightHandThumb1},get RightHandThumb2(){return h.RightHandThumb2},get RightHandThumb3(){return h.RightHandThumb3},get RightHandThumb4(){return h.RightHandThumb4},get RightHandIndex1(){return h.RightHandIndex1},get RightHandIndex2(){return h.RightHandIndex2},get RightHandIndex3(){return h.RightHandIndex3},get RightHandIndex4(){return h.RightHandIndex4},get RightHandMiddle1(){return h.RightHandMiddle1},get RightHandMiddle2(){return h.RightHandMiddle2},get RightHandMiddle3(){return h.RightHandMiddle3},get RightHandMiddle4(){return h.RightHandMiddle4},get RightHandRing1(){return h.RightHandRing1},get RightHandRing2(){return h.RightHandRing2},get RightHandRing3(){return h.RightHandRing3},get RightHandRing4(){return h.RightHandRing4},get RightHandPinky1(){return h.RightHandPinky1},get RightHandPinky2(){return h.RightHandPinky2},get RightHandPinky3(){return h.RightHandPinky3},get RightHandPinky4(){return h.RightHandPinky4},get LeftUpLeg(){return h.LeftUpLeg},get LeftLeg(){return h.LeftLeg},get LeftFoot(){return h.LeftFoot},get LeftToeBase(){return h.LeftToeBase},get LeftToe_End(){return h.LeftToe_End},get RightUpLeg(){return h.RightUpLeg},get RightLeg(){return h.RightLeg},get RightFoot(){return h.RightFoot},get RightToeBase(){return h.RightToeBase},get RightToe_End(){return h.RightToe_End}})}catch{}let A=null,P=-1,R=0;const N={jawOpen:-1,mouthFunnel:-1,mouthPucker:-1,mouthSmileL:-1,mouthSmileR:-1,mouthClose:-1};let I=0,U=0,K={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0};const ne={jawOpen:.02,mouthFunnel:.02,mouthPucker:.02,mouthSmileL:.02,mouthSmileR:.02,mouthClose:.02};let X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},z=[],le=[],pe=!1,Me=0;const Be=.25,$t=.08,Re={eyeBlinkLeft:-1,eyeBlinkRight:-1};let Se=null,Ve=performance.now()+1200+Math.random()*2e3,Qe=0,Wt=0,Ls=0,Xn=0;const Rs=.2,pr=.04,mr=.015,Ze={restJawOpen:.12,minLipSeparation:.07,maxMouthClose:.35,closeThresholdForSeparation:.2,visemeStrengthAlpha:.15,morphSmoothingBeta:.16,jawSmoothingAlpha:.12};function gr(c,w=null,d=null){try{if(!c||typeof c!="string")return;const v=performance.now(),C=typeof d=="number"?d:v,j=String(c).replace(/\s+/g," ").trim(),T=Math.max(1,j.length),y=95,_=typeof w=="number"&&isFinite(w)&&w>200?Math.max(40,w/T):y;let E=le.length>0?le[le.length-1].end:C;const O=j.toLowerCase().replace(/[^a-z\s]/g,"").replace(/([aeiou])[aeiou]+/g,"$1").match(/[^aeiou]*[aeiou]+/g)||[];for(const M of O){const H={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0};M.includes("o")||M.includes("u")?(H.mouthFunnel=.8,H.mouthPucker=.6,H.jawOpen=.3):M.includes("a")?(H.jawOpen=.6,H.mouthSmileL=.2,H.mouthSmileR=.2):(M.includes("e")||M.includes("i"))&&(H.mouthSmileL=.4,H.mouthSmileR=.4,H.jawOpen=.35),M.startsWith("p")||M.startsWith("b")||M.startsWith("m")?(H.mouthClose=.9,H.jawOpen*=.5):M.startsWith("t")||M.startsWith("d")||M.startsWith("n")?(H.mouthClose=.6,H.jawOpen*=.7):(M.startsWith("f")||M.startsWith("v")||M.startsWith("s"))&&(H.mouthFunnel=Math.max(H.mouthFunnel,.3),H.jawOpen*=.8);const $=_*(M.length*.8),k=E,q=k+$;le.push({start:k,end:q,targets:H}),E=q}for(const M of j)if(/[.,;:!?]/.test(M)){const H={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:.6},$=_*1.6,k=E,q=k+$;le.push({start:k,end:q,targets:H}),E=q}le.length>120&&(le=le.slice(-120))}catch{}}try{s.proxy.loadHumanoid=Ir}catch{}let Gt=!1,ae=null,Qn=null,$e=null,_o=!1,vt,Ae,Ke,bn,kt,_t,Vt,ce,xn,Sn=null,rn=null,vn=!1,Lt="",rt=[],dt=!1,_n="",Lo="",ln=null,lt=null,Zn=[],Ro=!1,oe={sessionInfo:null,room:null,mediaStream:null,sessionToken:null,connecting:!1,started:!1},B={baseSet:!1,basePose:{},breatheOffset:Math.random()*10,swayOffset:Math.random()*10,handOffset:Math.random()*10,nextGlanceAt:performance.now()+(1200+Math.random()*2400),glancePhase:0,glanceTarget:{yaw:0,pitch:0},nextHeadNodAt:performance.now()+(4e3+Math.random()*4e3),headNodPhase:0,nextHeadGlanceAt:performance.now()+(2800+Math.random()*3200),headGlancePhase:0,headGlanceHoldUntil:0,headGlanceTarget:{yaw:0,pitch:0},relaxPhase:0,relaxDone:!1};const eo=document.getElementById("debugOverlay"),et=document.getElementById("debugContent"),yr=document.getElementById("debugClose"),wr=document.getElementById("debugClear"),br=document.getElementById("debugCopy"),xr={log:console.log,warn:console.warn,error:console.error,info:console.info};function Sr(c){try{return c instanceof Error?c.stack||c.name+": "+c.message:typeof c=="object"?JSON.stringify(c,(w,d)=>d instanceof Node?`[Node ${d.nodeName}]`:d===window?"[Window]":d===document?"[Document]":d):String(c)}catch{try{return String(c)}catch{return"[unserializable]"}}}function to(c,w){if(!Ie||!et)return;const d=new Date().toLocaleTimeString(),v=document.createElement("div");v.className="whitespace-pre-wrap break-words";try{const C=Array.from(w||[]).map(Sr).join(" ");v.textContent=`[${d}] ${c.toUpperCase()} ${C}`}catch{v.textContent=`[${d}] ${c.toUpperCase()} [log append failed]`}et.appendChild(v);try{for(;et.childNodes.length>400;)et.removeChild(et.firstChild)}catch{}try{et.parentElement.scrollTop=et.parentElement.scrollHeight}catch{}}function vr(){if(Ie){try{eo==null||eo.classList.remove("hidden")}catch{}try{const c=(w,d,v)=>{try{w&&w.addEventListener(d,v)}catch{}};c(yr,"click",()=>{eo.classList.add("hidden")}),c(wr,"click",()=>{et&&(et.innerHTML="")}),c(br,"click",async()=>{try{const w=Array.from((et==null?void 0:et.children)||[]).map(v=>v.textContent||""),d=w.join(`
`);if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(d);else{const v=document.createElement("textarea");v.value=d,document.body.appendChild(v),v.select(),document.execCommand("copy"),document.body.removeChild(v)}console.log("DEBUG: logs copied",{lines:w.length})}catch(w){console.error("DEBUG: copy failed",w)}})}catch{}try{["log","warn","error","info"].forEach(c=>{console[c]=function(...w){try{to(c,w)}catch{}try{xr[c].apply(console,w)}catch{}}})}catch{}try{window.addEventListener("error",c=>{to("windowError",[c.message,`${c.filename}:${c.lineno}:${c.colno}`])}),window.addEventListener("unhandledrejection",c=>{const w=c.reason;to("promiseRejection",[w&&(w.stack||w.message)||String(w)])})}catch{}to("info",["Debug overlay enabled",{ua:navigator.userAgent,locale:be,recLang:wn,isAndroid:ot,isChrome:tn,hasWebSpeech:!!(window.SpeechRecognition||window.webkitSpeechRecognition)}])}}function _r(c){var v;const w=((v=Pn())==null?void 0:v.proxy)||{};let d=w.stripHtml?w.stripHtml(c||""):Co(c||"");return d=d.replace(/\*\*(.*?)\*\*/g,"$1"),d=d.replace(/\*(.*?)\*/g,"$1"),d=d.replace(/`+/g,""),d=d.replace(/https?:\/\/\S+/gi,""),d=d.replace(/^[\-\*•]\s+/gm,""),d=d.replace(/^\d+\.\s+/gm,""),d=d.replace(/(\d+)[\.,]00\b/g,"$1"),d=d.replace(/[\s\u00A0]+/g," ").trim(),d=d.replace(/([\.!?,;:]){2,}/g,"$1"),d}try{s.proxy.initUIBase(n,Ie)}catch{}try{const c=navigator.userAgent||"";(!!window.chrome&&/Chrome\/\d+/.test(c)&&!/Edg\//.test(c)&&!/OPR\//.test(c)&&!/Brave/i.test(c)||Ie)&&Q&&(Q.checked=!0,vn=!0,Mo().then(()=>Po()).catch(()=>{}))}catch{}try{F==null||F.addEventListener("change",async()=>{var c,w;if(F.checked){if(!Le.apiKey||!Le.serverUrl){try{G&&(G.textContent="Config mancante")}catch{}try{F.checked=!1}catch{}console.warn("HEYGEN: missing apiKey/serverUrl");return}(c=i("avatarStage"))==null||c.classList.add("hidden"),te==null||te.classList.remove("hidden");try{await As()}catch(v){console.error("HEYGEN: ensure session failed",v)}const d=async()=>{try{await(te==null?void 0:te.play())}catch{}try{await(Y==null?void 0:Y.play())}catch{}document.removeEventListener("click",d),document.removeEventListener("touchstart",d)};document.addEventListener("click",d),document.addEventListener("touchstart",d)}else{try{te==null||te.pause()}catch{}try{oe&&oe.room&&await oe.room.disconnect()}catch{}(w=i("avatarStage"))==null||w.classList.remove("hidden"),te==null||te.classList.add("hidden");try{G&&(G.textContent="")}catch{}}})}catch{}try{Q==null||Q.addEventListener("change",async()=>{vn=!!Q.checked,vn?(await Mo(),Po()):Ho()})}catch{}vr();function Ln(c){if(!c||c.trim()==="")return;if(_o){console.warn("SSE: start already in progress");return}_o=!0,setTimeout(()=>{_o=!1},800),console.log("TTS: Starting new conversation, resetting state");try{console.log("SSE: connecting",{team:de,uuid:V,locale:be})}catch{}p.classList.remove("hidden");try{$e&&($e.close(),$e=null)}catch{}if(Lt="",Lo="",_n="",ln){try{clearTimeout(ln)}catch{}ln=null}if(lt){try{clearInterval(lt)}catch{}lt=null}m&&!m.paused&&(m.pause(),m.currentTime=0),rt.forEach(O=>URL.revokeObjectURL(O.url)),rt=[],dt=!1;let w="";const d=new URLSearchParams({message:c,team:de,uuid:V||"",locale:be,ts:String(Date.now())});sn&&d.set("thread_id",sn),ft&&d.set("assistant_thread_id",ft);let v=!1,C=!0,j=0,T=null,y=null;lt||(lt=setInterval(()=>{try{Ps()}catch{}},120));function _(){T.addEventListener("message",O=>{try{const M=JSON.parse(O.data);if(M.token){try{const H=JSON.parse(M.token);if(H&&H.thread_id){sn=H.thread_id;return}if(H&&H.assistant_thread_id){ft=H.assistant_thread_id;return}}catch{}if(C){if(C=!1,p.classList.add("hidden"),ln)try{clearTimeout(ln)}catch{}ln=null,y&&(clearTimeout(y),y=null)}w+=M.token,Lt+=M.token,Ps()}}catch(M){console.warn("Message parse error:",M)}}),T.addEventListener("error",()=>{const O=T.readyState;try{O===2?console.error("SSE: closed",{attempt:j+1,readyState:O}):console.warn("SSE: transient error",{attempt:j+1,readyState:O})}catch{}if(!(O!==2&&!v)){try{T.close()}catch{}if($e=null,y){try{clearTimeout(y)}catch{}y=null}if(!v&&w.length===0&&j<2){j++;const M=220*j;setTimeout(()=>{E()},M);return}if(p.classList.add("hidden"),lt){try{clearInterval(lt)}catch{}lt=null}}}),T.addEventListener("done",()=>{try{T.close()}catch{}v=!0,p.classList.add("hidden");try{console.log("SSE: done event received")}catch{}if(y){try{clearTimeout(y)}catch{}y=null}if(Lt.trim().length>0){const O=Co(Lt).trim();O.length>0&&(console.log("TTS: Sending remaining text:",O.substring(0,50)+"..."),To(O)),Lt=""}if(lt){try{clearInterval(lt)}catch{}lt=null}})}function E(){try{$e&&$e.close()}catch{}T=new EventSource(`/api/chatbot/stream?${d.toString()}`),$e=T;try{console.log("SSE: connecting",{team:de,uuid:V,locale:be,threadId:sn,assistantThreadId:ft})}catch{}_(),ot&&(y&&clearTimeout(y),y=setTimeout(()=>{try{const O=T.readyState;if(w.length===0&&!v&&j<2&&(O===0||O===2)){j++;try{T.close()}catch{}$e=null;const M=280*j;console.warn("SSE: connect watchdog retry",{attempt:j}),setTimeout(()=>{E()},M)}}finally{try{clearTimeout(y)}catch{}y=null}},6e3))}E()}try{s.proxy.startStream=Ln}catch{}const Lr=async()=>{try{ce||(ce=new(window.AudioContext||window.webkitAudioContext)),ce.state==="suspended"&&await ce.resume()}catch{}try{s.proxy.startStream(a.value)}catch{Ln(a.value)}a.value=""};(Os=i("sendBtn"))==null||Os.addEventListener("click",Lr),(Fs=i("textInput"))==null||Fs.addEventListener("keyup",async c=>{if(c.key==="Enter"){try{ce||(ce=new(window.AudioContext||window.webkitAudioContext)),ce.state==="suspended"&&await ce.resume()}catch{}try{s.proxy.startStream(a.value)}catch{Ln(a.value)}a.value=""}});async function Ts(){try{window.speechSynthesis&&window.speechSynthesis.cancel()}catch{}try{m&&!m.paused&&(m.pause(),m.currentTime=0)}catch{}try{rt.forEach(c=>URL.revokeObjectURL(c.url))}catch{}rt=[],Zn=[],dt=!1,pe=!1,Ls=performance.now()+300;try{if(X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},le=[],U=0,R=0,Array.isArray(z))for(const c of z){const w=c.mesh&&c.mesh.morphTargetInfluences,d=c.indices||{};w&&(d.mouthFunnel>=0&&(w[d.mouthFunnel]=0),d.mouthPucker>=0&&(w[d.mouthPucker]=0),d.mouthSmileL>=0&&(w[d.mouthSmileL]=0),d.mouthSmileR>=0&&(w[d.mouthSmileR]=0),d.mouthClose>=0&&(w[d.mouthClose]=0),d.jawOpen>=0&&(w[d.jawOpen]=0))}re&&re.updateMatrixWorld&&re.updateMatrixWorld(!0)}catch{}}try{s.proxy._stopAllSpeechOutput=Ts}catch{}function an(c){const w=document.getElementById("listeningBadge");c?(w.classList.remove("hidden"),r.classList.remove("bg-rose-600"),r.classList.add("bg-emerald-600","ring-2","ring-emerald-400","animate-pulse")):(w.classList.add("hidden"),r.classList.add("bg-rose-600"),r.classList.remove("bg-emerald-600","ring-2","ring-emerald-400","animate-pulse"))}try{s.proxy._setListeningUI=an}catch{}async function Es(){try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return!0;if(!Qn){console.log("MIC: requesting permission"),Qn=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0}});try{Qn.getTracks().forEach(c=>c.stop())}catch{}Qn=null}return console.log("MIC: permission OK"),!0}catch(c){return console.warn("Mic permission denied or error",c),!1}}try{s.proxy._ensureMicPermission=Es}catch{}r==null||r.addEventListener("click",async()=>{if(Gt&&ae){try{ae.stop(),ae.abort&&ae.abort()}catch{}Gt=!1,an(!1),console.log("MIC: listening stopped by user");return}await Ts();try{$e&&($e.close(),$e=null)}catch{}try{ce||(ce=new(window.AudioContext||window.webkitAudioContext)),ce.state==="suspended"&&(await ce.resume(),console.log("AUDIO: context resumed"))}catch(v){console.warn("AUDIO: failed to init/resume",v)}if(!await Es()){alert("Permesso microfono negato. Abilitalo nelle impostazioni del browser.");return}try{let T=function(){C&&(clearTimeout(C),C=null)},y=function(){T(),C=setTimeout(()=>{console.warn("SPEECH: watchdog timeout (no result), restarting");try{ae.stop(),ae.abort&&ae.abort()}catch{}setTimeout(()=>{try{ae.start(),console.log("SPEECH: restarted by watchdog")}catch(_){console.error("SPEECH: restart failed",_)}},250)},8e3)};var w=T,d=y;const v=window.SpeechRecognition||window.webkitSpeechRecognition;if(!v)throw new Error("Web Speech API non disponibile");ae=new v,ae.lang=wn||"it-IT",ae.interimResults=!!ot,ae.continuous=!1,ae.maxAlternatives=1;let C=null,j=0;ae.onstart=async()=>{Gt=!0,an(!0),console.log("SPEECH: onstart");try{ce&&ce.state==="running"&&(await ce.suspend(),console.log("AUDIO: context suspended for recognition"))}catch(_){console.warn("AUDIO: suspend failed",_)}},ae.onaudiostart=()=>{console.log("SPEECH: onaudiostart")},ae.onsoundstart=()=>{console.log("SPEECH: onsoundstart")},ae.onspeechstart=()=>{console.log("SPEECH: onspeechstart"),y()},ae.onspeechend=()=>{console.log("SPEECH: onspeechend"),T()},ae.onsoundend=()=>{console.log("SPEECH: onsoundend")},ae.onaudioend=()=>{console.log("SPEECH: onaudioend")},ae.onnomatch=_=>{console.warn("SPEECH: onnomatch",_&&_.message||"")},ae.onerror=async _=>{console.error("SPEECH: onerror",_&&(_.error||_.message)||_),Gt=!1,an(!1),T();try{ce&&ce.state==="suspended"&&(await ce.resume(),console.log("AUDIO: context resumed after error"))}catch(E){console.warn("AUDIO: resume after error failed",E)}},ae.onend=async()=>{Gt=!1,an(!1),console.log("SPEECH: onend"),T();try{ce&&ce.state==="suspended"&&(await ce.resume(),console.log("AUDIO: context resumed after end"))}catch(_){console.warn("AUDIO: resume after end failed",_)}},ae.onresult=_=>{try{j=Date.now();const E=_.results,O=E[E.length-1],M=O[0].transcript,H=O.isFinal===!0||!ae.interimResults;if(console.log("SPEECH: onresult",{transcript:M,isFinal:H,resultIndex:_.resultIndex,length:E.length}),Ie&&u&&(u.classList.remove("hidden"),u.textContent=M+(H?"":" …")),H){Gt=!1,an(!1),Ie&&u&&setTimeout(()=>{try{u.classList.add("hidden"),u.textContent=""}catch{}},800);const $=(M||"").trim();if(!$){console.warn("SPEECH: final transcript empty, not starting stream");return}if(ot)setTimeout(()=>{try{s.proxy.startStream($)}catch{Ln($)}},220);else try{s.proxy.startStream($)}catch{Ln($)}}}catch(E){console.error("SPEECH: onresult handler failed",E)}},console.log("SPEECH: start()",{lang:ae.lang}),ae.start()}catch(v){console.warn("Riconoscimento vocale non disponibile o errore",v),alert("Riconoscimento vocale non disponibile in questo browser.")}});try{s.proxy._cleanup=()=>{try{$e&&($e.close(),$e=null)}catch{}try{Ho()}catch{}try{ae&&Gt&&(ae.stop(),ae.abort&&ae.abort())}catch{}try{Ke&&Ke.dispose&&Ke.dispose()}catch{}try{vt&&vt.traverse(c=>{var w,d,v,C;try{(d=(w=c.geometry)==null?void 0:w.dispose)==null||d.call(w)}catch{}try{c.material&&(Array.isArray(c.material)?c.material.forEach(j=>{var T;return(T=j.dispose)==null?void 0:T.call(j)}):(C=(v=c.material).dispose)==null||C.call(v))}catch{}})}catch{}}}catch{}function Rr(){var E,O;const c=n&&n.querySelector?n.querySelector("#avatarStage"):document.getElementById("avatarStage"),w=c.getBoundingClientRect();let d=Math.floor(w.width&&w.width>0?w.width:Math.min(window.innerWidth||360,520)),v=Math.floor(w.height&&w.height>0?w.height:Math.round(d*4/3));(!d||d<10||!v||v<10)&&(d=800,v=450,c.style.width=d+"px",c.style.height=v+"px"),vt=new THREE.Scene;try{const M=$=>{try{c.style.backgroundImage=`url('${$}')`,c.style.backgroundPosition="center center",c.style.backgroundRepeat="no-repeat",c.style.backgroundSize="auto 100%"}catch{}},H=new Image;H.onload=()=>M("/images/office.webp"),H.onerror=()=>{try{const $=new Image;$.onload=()=>M("/images/office.webp"),$.onerror=()=>{try{c.style.backgroundImage=""}catch{}},$.src="/images/office.webp"}catch{}},H.src="/images/office.webp"}catch{}Ae=new THREE.PerspectiveCamera(2,d/v,.1,100),Ae.position.set(0,.5,2);try{console.log("CAM init",{pos:Ae.position.toArray(),fov:Ae.fov})}catch{}Ke=new THREE.WebGLRenderer({antialias:!0,alpha:!0});try{Ke.setClearColor(0,0)}catch{}Ke.setPixelRatio(Math.min(window.devicePixelRatio||1,1.75)),Ke.setSize(d,v),c.innerHTML="",c.appendChild(Ke.domElement),Ke.domElement.style.width="100%",Ke.domElement.style.height="100%";const C=new THREE.DirectionalLight(16777215,1);C.position.set(1,2,3),vt.add(C),vt.add(new THREE.AmbientLight(16777215,.4));const j=new THREE.SphereGeometry(.6,32,32),T=new THREE.MeshStandardMaterial({color:9414655,roughness:.6,metalness:0});bn=new THREE.Mesh(j,T),bn.position.y=.2,vt.add(bn);const y=new THREE.BoxGeometry(.8,.25,.6),_=new THREE.MeshStandardMaterial({color:10203391,roughness:.6});if(kt=new THREE.Mesh(y,_),kt.position.y=-.25,kt.position.z=0,kt.geometry.translate(0,.12,0),vt.add(kt),console.log("setupScene: start, THREE present =",!!window.THREE),Ms(),window.addEventListener("resize",Cs),"ResizeObserver"in window){try{(O=(E=window.__enjoyTalkResizeObserver)==null?void 0:E.disconnect)==null||O.call(E)}catch{}try{window.__enjoyTalkResizeObserver=new ResizeObserver(Cs),window.__enjoyTalkResizeObserver.observe(c)}catch{}}}function Cs(){if(!Ke||!Ae)return;const c=n&&n.querySelector?n.querySelector("#avatarStage"):document.getElementById("avatarStage"),w=n&&n.querySelector?n.querySelector("#controlsBar"):document.getElementById("controlsBar"),d=c.getBoundingClientRect();let v=Math.floor(d.width&&d.width>0?d.width:Math.min(window.innerWidth||360,520)),C=Math.floor(d.height&&d.height>0?d.height:Math.round(v*4/3));(!v||v<10||!C||C<10)&&(v=800,C=450,c.style.width=v+"px",c.style.height=C+"px"),Ke.setSize(v,C),Ae.aspect=v/C,Ae.updateProjectionMatrix();try{const j=w?w.getBoundingClientRect():null,T=j?Math.ceil(j.height):0;document.body.style.setProperty("--controls-pad",T+"px")}catch{}try{const j=window.visualViewport?window.visualViewport.height:window.innerHeight,T=Math.max(320,Math.floor(j-((w==null?void 0:w.offsetHeight)||0)-180));c.style.maxHeight=T+"px"}catch{}}function Tr(){if(B.baseSet)return;const c=(w,d)=>{d&&(B.basePose[w]={rot:d.rotation.clone(),pos:d.position.clone()})};c("Hips",h.Hips),c("Spine",h.Spine),c("Spine1",h.Spine1),c("Spine2",h.Spine2),c("Neck",h.Neck),c("Head",Ce),c("LeftShoulder",At),c("RightShoulder",l),c("LeftArm",f),c("RightArm",g),c("LeftForeArm",L),c("RightForeArm",x),B.baseSet=!0}function Er(c){try{if(pe||window.speechSynthesis&&window.speechSynthesis.speaking||I>performance.now()||!Array.isArray(z)||z.length===0)return;const d=c*.2,v=c*.6,C=c*1.1;for(const j of z){const T=j.mesh&&j.mesh.morphTargetInfluences,y=j.indices||{};if(!T)continue;const _=(O,M=0,H=1)=>Math.max(M,Math.min(H,O)),E=(O,M,H=0)=>(.5+.5*Math.sin(M*c+H))*O;y.browInnerUp>=0&&(T[y.browInnerUp]=_(E(.06,.5,.7))),y.browOuterUpLeft>=0&&(T[y.browOuterUpLeft]=_(E(.05,.45,1.4))),y.browOuterUpRight>=0&&(T[y.browOuterUpRight]=_(E(.05,.47,2.1))),y.browDownLeft>=0&&(T[y.browDownLeft]=_(E(.03,.35,2.7))),y.browDownRight>=0&&(T[y.browDownRight]=_(E(.03,.33,1.9))),y.eyeSquintLeft>=0&&(T[y.eyeSquintLeft]=_(E(.04,.8,.9))),y.eyeSquintRight>=0&&(T[y.eyeSquintRight]=_(E(.04,.78,1.3))),y.eyeWideLeft>=0&&(T[y.eyeWideLeft]=_(E(.02,.9,.2))),y.eyeWideRight>=0&&(T[y.eyeWideRight]=_(E(.02,.92,.4))),y.noseSneerLeft>=0&&(T[y.noseSneerLeft]=_(E(.01,.5,.3))),y.noseSneerRight>=0&&(T[y.noseSneerRight]=_(E(.01,.52,.6))),y.mouthDimpleLeft>=0&&(T[y.mouthDimpleLeft]=_(E(.025,.7,.5))),y.mouthDimpleRight>=0&&(T[y.mouthDimpleRight]=_(E(.025,.68,1.1))),y.mouthPressLeft>=0&&(T[y.mouthPressLeft]=_(E(.02,.55,1.6))),y.mouthPressRight>=0&&(T[y.mouthPressRight]=_(E(.02,.57,2))),y.mouthUpperUpLeft>=0&&(T[y.mouthUpperUpLeft]=_(E(.02,.4,1.4))),y.mouthUpperUpRight>=0&&(T[y.mouthUpperUpRight]=_(E(.02,.42,.8))),y.mouthFrownLeft>=0&&(T[y.mouthFrownLeft]=_(E(.015,.5,2.2))),y.mouthFrownRight>=0&&(T[y.mouthFrownRight]=_(E(.015,.52,2.6))),y.mouthStretchLeft>=0&&(T[y.mouthStretchLeft]=_(E(.015,.35,.9))),y.mouthStretchRight>=0&&(T[y.mouthStretchRight]=_(E(.015,.37,1.2))),y.mouthRollLower>=0&&(T[y.mouthRollLower]=_(E(.02,.5,1.9))),y.mouthRollUpper>=0&&(T[y.mouthRollUpper]=_(E(.02,.48,.4))),y.cheekPuff>=0&&(T[y.cheekPuff]=_(E(.01,.27,1.3))),y.cheekSquintLeft>=0&&(T[y.cheekSquintLeft]=_(E(.02,.7,.5))),y.cheekSquintRight>=0&&(T[y.cheekSquintRight]=_(E(.02,.72,.7)))}}catch{}}function Cr(){try{if(!re)return;Tr();const c=performance.now(),w=c*.001,d=.006*(.5+.5*Math.sin((w+B.breatheOffset)*.9)),v=.01*Math.sin((w+B.swayOffset)*.25),C=(q,J)=>{const se=h[q],ge=B.basePose[q];!se||!ge||(se.rotation.x=ge.rot.x+d*J)};C("Spine",.7),C("Spine1",.9),C("Spine2",1);const j=h.Hips,T=B.basePose.Hips;j&&T&&(j.rotation.y=T.rot.y+v*.5);const y=At,_=l,E=f,O=g,M=L,H=x;if(!B.relaxDone&&E&&O?(E.rotation.x=1,E.rotation.z=-.5,O.rotation.x=1,O.rotation.z=.5,B.relaxDone=!0,B.basePose.LeftArm&&(B.basePose.LeftArm.rot=E.rotation.clone()),B.basePose.RightArm&&(B.basePose.RightArm.rot=O.rotation.clone())):B.relaxDone&&E&&O&&(E.rotation.x=1,E.rotation.z=-.5,O.rotation.x=1,O.rotation.z=.5),Ce&&B.basePose.Head){const q=B.basePose.Head.rot;let J=.02*Math.sin(w*.35+.7),se=.015*Math.sin(w*.5+1.3),ge=.01*Math.sin(w*.4+2.1);if(c>=B.nextHeadGlanceAt&&B.headGlancePhase===0&&(B.headGlancePhase=.001,B.headGlanceTarget={yaw:(Math.random()-.5)*.35,pitch:(Math.random()-.5)*.12}),B.headGlancePhase>0){B.headGlancePhase=Math.min(1,B.headGlancePhase+.08);const ve=B.headGlancePhase<=.5?2*B.headGlancePhase*B.headGlancePhase:1-Math.pow(-2*B.headGlancePhase+2,2)/2;J+=B.headGlanceTarget.yaw*ve,se+=B.headGlanceTarget.pitch*ve,B.headGlancePhase>=1&&B.headGlanceHoldUntil===0&&(B.headGlanceHoldUntil=c+(400+Math.random()*500)),B.headGlanceHoldUntil&&c>B.headGlanceHoldUntil&&(B.headGlancePhase=0,B.headGlanceHoldUntil=0,B.nextHeadGlanceAt=c+(2400+Math.random()*2800),B.headGlanceTarget={yaw:0,pitch:0})}if(Ce.rotation.y=q.y+J,Ce.rotation.x=q.x+se,Ce.rotation.z=q.z+ge,c>=B.nextHeadNodAt&&B.headNodPhase===0&&(B.headNodPhase=.001),B.headNodPhase>0){B.headNodPhase=Math.min(1,B.headNodPhase+.06);const ve=B.headNodPhase<=.5?B.headNodPhase*2:1-(B.headNodPhase-.5)*2;Ce.rotation.x+=.03*Math.sin(Math.PI*Math.pow(Math.max(0,Math.min(1,ve)),1.4)),B.headNodPhase>=1&&(B.headNodPhase=0,B.nextHeadNodAt=c+(3500+Math.random()*5e3))}}const $=h.LeftEye,k=h.RightEye;if($&&k)if(c>=B.nextGlanceAt&&B.glancePhase===0&&(B.glancePhase=.001,B.glanceTarget={yaw:(Math.random()-.5)*.18,pitch:(Math.random()-.5)*.12}),B.glancePhase>0){B.glancePhase=Math.min(1,B.glancePhase+.18);const q=B.glancePhase<=.5?2*B.glancePhase*B.glancePhase:1-Math.pow(-2*B.glancePhase+2,2)/2;$.rotation.y=B.glanceTarget.yaw*q,k.rotation.y=B.glanceTarget.yaw*q,$.rotation.x=B.glanceTarget.pitch*q,k.rotation.x=B.glanceTarget.pitch*q,B.glancePhase>=1&&(B.glancePhase=0,B.nextGlanceAt=c+(900+Math.random()*1900))}else $.rotation.y*=.9,k.rotation.y*=.9,$.rotation.x*=.9,k.rotation.x*=.9;try{re.updateMatrixWorld(!0)}catch{}}catch{}}function Ms(){const c=performance.now()<(Wt||0);requestAnimationFrame(Ms),bn.position.y=.2+Math.sin(performance.now()/1200)*.01,Cr(),Er(performance.now()*.001);function w(){try{if(!Array.isArray(z)||z.length===0)return;const y=performance.now()*.001,E=.12+.012*Math.sin(y*.6+1.1),O=.006+.006*Math.sin(y*.8+.4);for(const M of z){const H=M.mesh&&M.mesh.morphTargetInfluences,$=M.indices||{};H&&($.mouthSmileL>=0&&(H[$.mouthSmileL]=Math.max(0,Math.min(.15,E))),$.mouthSmileR>=0&&(H[$.mouthSmileR]=Math.max(0,Math.min(.15,E))),$.mouthPucker>=0&&(H[$.mouthPucker]=Math.max(0,Math.min(.03,O))))}}catch{}}v||w();let d=0;if(b&&b.checked&&"speechSynthesis"in window&&window.speechSynthesis.speaking&&(_t&&Vt&&!c||(d=0)),_t&&Vt){_t.getByteTimeDomainData(Vt);let y=0;for(let $=0;$<Vt.length;$++){const k=(Vt[$]-128)/128;y+=k*k}const _=Math.sqrt(y/Vt.length),E=Math.min(1,_*5.5),O=E>Me?Be:$t;Me=Me*(1-O)+E*O,d=Me;const H=pe||window.speechSynthesis&&window.speechSynthesis.speaking||d>pr?1:d>mr?Xn:0;Xn=Xn*(1-Rs)+H*Rs}const v=Xn>.5;if(c||!v&&performance.now()<Ls&&(X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},I=performance.now()+120),(!_t||!pe)&&!c){c&&(X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},I=performance.now()+60);const y=performance.now();le=le.filter(E=>E.end>y);const _=le.find(E=>E.start<=y&&E.end>y);if(_){const E=Math.max(0,Math.min(1,(y-_.start)/Math.max(1,_.end-_.start)));X={jawOpen:_.targets.jawOpen*E,mouthFunnel:_.targets.mouthFunnel*E,mouthPucker:_.targets.mouthPucker*E,mouthSmileL:_.targets.mouthSmileL*E,mouthSmileR:_.targets.mouthSmileR*E,mouthClose:_.targets.mouthClose*E},I=y+120}}try{b&&b.checked&&"speechSynthesis"in window&&window.speechSynthesis.speaking&&(I=performance.now()+240)}catch{}const C=performance.now(),j=Ze.restJawOpen;let T=null;if(Array.isArray(z)&&z.length>0&&I>C||!Ee&&A&&P>=0){U=U*(1-Ze.visemeStrengthAlpha)+Ze.visemeStrengthAlpha;for(const y of z){const _=y.mesh.morphTargetInfluences;if(!_)continue;const E=(J,se)=>{const ge=K[J]||0,ve=se-ge;if(Math.abs(ve)<(ne[J]||.02))return ge;const tt=Ze.morphSmoothingBeta,Pe=ge*(1-tt)+se*tt;return K[J]=Pe,Pe},O=(J,se,ge)=>{J>=0&&(_[J]=_[J]*.7+Math.max(0,Math.min(1,E(ge,se)*U))*.3)};let M=Math.min(1,Math.max(0,X.jawOpen+(pe?0:j)));const H=Math.min(1,X.mouthFunnel+X.mouthPucker),$=Math.max(0,1-M*1.5-H*.9);let k=Math.min(Ze.maxMouthClose,(X.mouthClose||0)*$);performance.now()<Wt?(M=Math.min(M,.005),k=0):k>Ze.closeThresholdForSeparation&&(M=Math.max(M,Ze.minLipSeparation)),T=M,O(y.indices.jawOpen,M*.9,"jawOpen"),O(y.indices.mouthFunnel,X.mouthFunnel*1.05,"mouthFunnel"),O(y.indices.mouthPucker,X.mouthPucker*1,"mouthPucker"),O(y.indices.mouthSmileL,X.mouthSmileL*1.05,"mouthSmileL"),O(y.indices.mouthSmileR,X.mouthSmileR*1.05,"mouthSmileR"),O(y.indices.mouthClose,k,"mouthClose");const q=performance.now();if(q>=Ve&&(Qe=.001,Ve=q+(2200+Math.random()*2200)),Qe>0){Qe=Math.min(1,Qe+.065);const J=Qe<=.5?Qe*2:1-(Qe-.5)*2,se=Math.pow(Math.max(0,Math.min(1,J)),1.6);Se&&Se.morphTargetInfluences?(Re.eyeBlinkLeft>=0&&(Se.morphTargetInfluences[Re.eyeBlinkLeft]=Se.morphTargetInfluences[Re.eyeBlinkLeft]*.6+se*.4),Re.eyeBlinkRight>=0&&(Se.morphTargetInfluences[Re.eyeBlinkRight]=Se.morphTargetInfluences[Re.eyeBlinkRight]*.6+se*.4)):(Re.eyeBlinkLeft>=0&&(_[Re.eyeBlinkLeft]=_[Re.eyeBlinkLeft]*.6+se*.4),Re.eyeBlinkRight>=0&&(_[Re.eyeBlinkRight]=_[Re.eyeBlinkRight]*.6+se*.4)),Qe>=1&&(Qe=0)}}}else if(A&&P>=0&&Array.isArray(A.morphTargetInfluences)){U=0;const y=Math.min(1,d*2+(pe?0:j*.6));R=R*.82+y*.18,A.morphTargetInfluences[P]=R,T=Math.max(y,Ze.minLipSeparation)}if(Ee){if(Ee.type==="Bone"){window.__jawBonePrev=window.__jawBonePrev??0;const y=Math.min(1,(typeof Me=="number"?Me:0)*1.4);let _=Math.max(Math.min(1,Math.max(0,X.jawOpen+(pe?0:j))),y);const E=Math.max(Ze.minLipSeparation,T!==null?T:_),O=Ze.jawSmoothingAlpha,M=window.__jawBonePrev*(1-O)+E*O;window.__jawBonePrev=M;const H=He*(M*.65);yn==="x"?Ee.rotation.x=H:yn==="y"?Ee.rotation.y=H:Ee.rotation.z=H;try{Ee.updateMatrixWorld(!0)}catch{}try{re.updateMatrixWorld(!0)}catch{}try{if((!Nt||he)&&Ce){const $=xe*(M*.15);Ce.rotation.x=$,Ce.updateMatrixWorld(!0)}}catch{}}}else if(kt){window.__jawGeomPrev=window.__jawGeomPrev??0;const y=Math.max(Ze.minLipSeparation,T!==null?T:d*.9+(pe?0:j*.2)),_=Ze.jawSmoothingAlpha,E=window.__jawGeomPrev*(1-_)+y*_;window.__jawGeomPrev=E,kt.rotation.x=-(E*.5)}Ke.render(vt,Ae)}function Ps(){var C;const c=((C=Pn())==null?void 0:C.proxy)||{},w=c.stripHtml?c.stripHtml(Lt):Co(Lt);if(!w||w.length<2)return;const d=c.findSentenceBoundary?c.findSentenceBoundary(w):Mr(w);if(d<=0)return;const v=w.slice(0,d).trim();if(!(!v||v.length<4)){if(rt.some(j=>j.text===v)){Lt=w.slice(d).trim();return}console.log("TTS: Sending sentence:",v.substring(0,80)+"..."),To(v),Lo=v,Lt=w.slice(d).trim()}}function Mr(c){const w=["es","ecc","etc","sig","sigg","sigra","sig.na","sig.ra","dott","ing","avv","prof","dr","dottssa","srl","spa","s.p.a","s.r.l","p.es","nr","n","art","cap","ca","vs","no"];let d=0,v=-1;for(;d<c.length;){const C=c[d];let j=!1,T=d+1;if(C==="."||C==="!"||C==="?"||C==="…"){if(C==="."&&c.slice(d,d+3)==="...")T=d+3,j=!0,d=d+3;else{const y=Hs(c,d+1),_=Pr(c,d-1),E=y>=0?c[y]:"",O=_>=0?c[_]:"",M=C==="."&&/[0-9]/.test(O)&&/[0-9]/.test(E);let H=!1;if(C==="."){const $=Hr(c,d-1),k=c.slice($,d).toLowerCase().replace(/\./g,"");k.length>0&&w.includes(k)&&(H=!0)}!M&&!H&&(j=!0),d=d+1}if(j){const y=Hs(c,T),_=y>=0?/[A-ZÀ-Ý\(\["'“”‘’]/.test(c[y]):!0;(y<0||_||c[y-1]===`
`)&&(v=T)}}else d++}return v}function Hs(c,w){for(let d=w;d<c.length;d++)if(!/\s/.test(c[d]))return d;return-1}function Pr(c,w){for(let d=w;d>=0;d--)if(!/\s/.test(c[d]))return d;return-1}function Hr(c,w){let d=w;for(;d>=0&&/[\p{L}\p{N}\.]/u.test(c[d]);)d--;return d+1}function To(c){var v;const w=((v=Pn())==null?void 0:v.proxy)||{},d=w.sanitizeForTts?w.sanitizeForTts(c):_r(c);if(!(!d||d.length<3)&&!rt.some(C=>C.text===d)){if(F&&F.checked){try{Ar(d)}catch(C){console.error("HEYGEN repeat failed",C)}return}if(b&&b.checked&&"speechSynthesis"in window){rt.push({url:null,text:d}),dt||Kt();return}Zn.push(d),Eo()}}try{s.proxy._sendToTts=To}catch{}async function Eo(){if(Ro)return;const c=Zn.shift();if(c){Ro=!0;try{console.log("TTS: Requesting audio for:",c.substring(0,80));const w=await fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:c,locale:"it-IT",format:"mp3"})});if(!w.ok)throw new Error(`TTS API ${w.status}`);const d=await w.blob(),v=URL.createObjectURL(d);rt.push({url:v,text:c}),dt||Kt()}catch(w){console.error("TTS request failed:",w)}finally{Ro=!1,Zn.length>0&&Eo()}}}try{s.proxy._processTtsQueue=Eo}catch{}function Kt(){if(!rt.length){dt=!1,console.log("TTS: Queue empty, stopping");return}dt=!0;const c=rt.shift();if(console.log("TTS: Playing:",c.text.substring(0,50),"... Queue remaining:",rt.length),b&&b.checked&&"speechSynthesis"in window)try{const C=new SpeechSynthesisUtterance(c.text);C.lang="it-IT",C.rate=1,C.pitch=1,C.volume=1;const j=window.speechSynthesis.getVoices(),T=["Google italiano","Microsoft","Elsa","Lucia","Carla","Silvia","Alice"],y=j.filter(O=>/it[-_]/i.test(O.lang)),E=y.filter(O=>/female|donna|feminine/i.test(O.name+" "+(O.voiceURI||"")))[0]||y.find(O=>T.some(M=>(O.name||"").includes(M)))||y[0]||j.find(O=>/Italian/i.test(O.name))||j[0];E&&(C.voice=E),D&&(D.textContent=E?`Voce: ${E.name}`:"Voce IT non trovata (usa default)"),C.onstart=()=>{try{const O=performance.now(),M=(c.text||"").replace(/\s+/g," ").trim(),H=M.split(/\s+/).filter(Boolean),$=M.length,k=H.length||Math.max(1,Math.round($/5)),q=(M.match(/[.!?…]/g)||[]).length,J=(M.match(/[,:;]/g)||[]).length,se=(M.match(/[()\-\u2013\u2014]/g)||[]).length,ge=typeof C.rate=="number"&&C.rate>0?C.rate:1;let ve=k*.55*.5+$/13.5*.5+(q*.55+J*.32+se*.22)+.4;ve=ve/ge,ve=Math.max(2.2,ve),le=[],gr(c.text||"",Math.floor(ve*1e3),O)}catch{}},C.onend=()=>{try{if(le=[],X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},Wt=performance.now()+220,I=performance.now()+180,U=0,Array.isArray(z))for(const O of z){const M=O.mesh&&O.mesh.morphTargetInfluences,H=O.indices||{};if(M){try{H.mouthFunnel>=0&&(M[H.mouthFunnel]=0)}catch{}try{H.mouthPucker>=0&&(M[H.mouthPucker]=0)}catch{}try{H.mouthSmileL>=0&&(M[H.mouthSmileL]=0)}catch{}try{H.mouthSmileR>=0&&(M[H.mouthSmileR]=0)}catch{}try{H.mouthClose>=0&&(M[H.mouthClose]=0)}catch{}try{H.jawOpen>=0&&(M[H.jawOpen]=0)}catch{}}}re&&re.updateMatrixWorld&&re.updateMatrixWorld(!0)}catch{}I=0,U=0,_n=(_n+" "+c.text).slice(-400),Lo="",Kt()},C.onerror=()=>{c.url?(m.src=c.url,m.play().catch(()=>{dt=!1})):(dt=!1,Kt())},window.speechSynthesis.speak(C);return}catch(C){console.warn("speechSynthesis error, fallback to audio element",C)}if(m.src=c.url,ce||(ce=new(window.AudioContext||window.webkitAudioContext)),ce.state==="suspended"&&ce.resume().catch(()=>{}),xn||(xn=ce.createMediaElementSource(m),_t=ce.createAnalyser(),_t.fftSize=2048,Vt=new Uint8Array(_t.fftSize),xn.connect(_t),_t.connect(ce.destination)),vn)try{Mo().then(()=>Po()).catch(C=>console.warn("Meyda start failed",C))}catch(C){console.warn("Meyda start failed",C)}const w=()=>{URL.revokeObjectURL(c.url),_n=(_n+" "+c.text).slice(-400),console.log("TTS: Finished playing:",c.text.substring(0,50)),pe=!1,le=[],X={jawOpen:0,mouthFunnel:0,mouthPucker:0,mouthSmileL:0,mouthSmileR:0,mouthClose:0},Wt=performance.now()+220,I=performance.now()+180;try{if(Array.isArray(z))for(const C of z){const j=C.mesh&&C.mesh.morphTargetInfluences,T=C.indices||{};j&&(T.mouthFunnel>=0&&(j[T.mouthFunnel]=0),T.mouthPucker>=0&&(j[T.mouthPucker]=0),T.mouthSmileL>=0&&(j[T.mouthSmileL]=0),T.mouthSmileR>=0&&(j[T.mouthSmileR]=0),T.mouthClose>=0&&(j[T.mouthClose]=0),T.jawOpen>=0&&(j[T.jawOpen]=0))}re&&re.updateMatrixWorld&&re.updateMatrixWorld(!0)}catch{}m.removeEventListener("ended",w),Ho(),Kt()},d=()=>{console.error("TTS: Playback error for:",c.text.substring(0,50)),URL.revokeObjectURL(c.url),m.removeEventListener("ended",w),m.removeEventListener("error",d),dt=!1,pe=!1,Kt()};m.addEventListener("ended",w),m.addEventListener("error",d);const v=()=>{try{le=[]}catch{}try{m.removeEventListener("playing",v)}catch{}};m.addEventListener("playing",v),m.play().then(()=>{pe=!0}).catch(C=>{console.error("TTS: Play failed:",C),dt=!1,d()})}try{s.proxy._playNextInQueue=Kt}catch{}async function As(){var c,w;if(!(oe.started||oe.connecting)){oe.connecting=!0;try{if(!Le.apiKey||!Le.serverUrl)throw G&&(G.textContent="Config mancante"),new Error("HEYGEN config missing");const v=await(await fetch(`${Le.serverUrl}/v1/streaming.create_token`,{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":Le.apiKey}})).json();if(oe.sessionToken=(c=v==null?void 0:v.data)==null?void 0:c.token,!oe.sessionToken)throw new Error("No session token");G&&(G.textContent="Token OK");const C={quality:"high",version:"v2",video_encoding:"H264"};nt&&(C.avatar_name=nt),Ut&&(C.voice={voice_id:Ut,rate:1});const T=await(await fetch(`${Le.serverUrl}/v1/streaming.new`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe.sessionToken}`},body:JSON.stringify(C)})).json();if(oe.sessionInfo=T==null?void 0:T.data,!((w=oe.sessionInfo)!=null&&w.session_id))throw new Error("No session info");oe.room=new LivekitClient.Room({adaptiveStream:!1,dynacast:!0,videoCaptureDefaults:{resolution:LivekitClient.VideoPresets.h720.resolution}}),oe.mediaStream=new MediaStream,oe.room.on(LivekitClient.RoomEvent.TrackSubscribed,async y=>{try{if(y.kind==="video"&&(oe.mediaStream.addTrack(y.mediaStreamTrack),te&&(te.srcObject=oe.mediaStream,te.muted=!0,await te.play().catch(()=>{})),G&&(G.textContent="Video connesso")),y.kind==="audio"){const _=new MediaStream([y.mediaStreamTrack]);Y&&(Y.srcObject=_,await Y.play().catch(()=>{})),G&&(G.textContent="Audio connesso")}}catch(_){console.warn("HEYGEN: TrackSubscribed handler failed",_)}}),oe.room.on(LivekitClient.RoomEvent.TrackUnsubscribed,y=>{const _=y.mediaStreamTrack;_&&oe.mediaStream.removeTrack(_)}),await oe.room.prepareConnection(oe.sessionInfo.url,oe.sessionInfo.access_token),await fetch(`${Le.serverUrl}/v1/streaming.start`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe.sessionToken}`},body:JSON.stringify({session_id:oe.sessionInfo.session_id})});try{const y=new URLSearchParams({session_id:oe.sessionInfo.session_id,session_token:oe.sessionToken,silence_response:"true",stt_language:"en"}),_=`wss://${new URL(Le.serverUrl).hostname}/v1/ws/streaming.chat?${y}`;oe.ws=new WebSocket(_),oe.ws.addEventListener("message",()=>{})}catch{}await oe.room.connect(oe.sessionInfo.url,oe.sessionInfo.access_token);try{te!=null&&te.srcObject&&te.paused&&await te.play()}catch{}try{Y!=null&&Y.srcObject&&Y.paused&&await Y.play()}catch{}oe.started=!0,G&&(G.textContent="Connesso")}catch(d){console.error("HEYGEN: init failed",d)}finally{oe.connecting=!1}}}async function Ar(c){var w;try{if(await As(),!((w=oe.sessionInfo)!=null&&w.session_id))return;await fetch(`${Le.serverUrl}/v1/streaming.task`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${oe.sessionToken}`},body:JSON.stringify({session_id:oe.sessionInfo.session_id,text:c,task_type:"repeat"})})}catch(d){console.error("HEYGEN: repeat failed",d)}}function Co(c){const w=document.createElement("div");return w.innerHTML=c,(w.textContent||w.innerText||"").replace(/\s+/g," ").trim()}async function Mo(){if(window.Meyda){Sn=window.Meyda;return}return new Promise((c,w)=>{try{const d=document.createElement("script");d.src="https://cdn.jsdelivr.net/npm/meyda@5.6.3/dist/web/meyda.min.js",d.async=!0,d.onload=()=>{Sn=window.Meyda,console.log("Meyda loaded"),c()},d.onerror=v=>{console.warn("Meyda load failed",v),w(v)},document.head.appendChild(d)}catch(d){w(d)}})}function Po(){try{if(!vn||!ce||!xn||!Sn||rn)return;if(!Sn.isMeydaSupported(ce)){console.warn("Meyda not supported");return}rn=Sn.createMeydaAnalyzer({audioContext:ce,source:xn,bufferSize:1024,featureExtractors:["rms","zcr","spectralCentroid","mfcc"],callback:kr}),rn.start(),console.log("Meyda analyzer started")}catch(c){console.warn("startMeydaAnalyzer failed",c)}}function Ho(){try{rn&&(rn.stop(),rn=null)}catch{}}function kr(c){try{if(!c)return;const w=Math.min(1,c.rms*2),d=Math.max(0,(1-c.spectralCentroid/4e3)*.7*c.rms),v=Math.max(0,(1-c.spectralCentroid/4e3)*.5*c.rms),C=Math.max(0,(c.spectralCentroid/4e3-.3)*.6*c.rms),j=Math.max(0,(.2-c.zcr)*1.2);X={jawOpen:w,mouthFunnel:d,mouthPucker:v,mouthSmileL:C*.7,mouthSmileR:C*.7,mouthClose:j},I=performance.now()+90}catch{}}function Ir(){if(!(re||it)){it=!0;try{let y=function(O){try{re=O,re.position.set(0,-.3,0),re.scale.set(1.2,1.2,1.2);try{console.log("HUM attach",{pos:re.position.toArray(),scale:re.scale.toArray()})}catch{}vt.add(re),Ao(Ae,re,1.4),z=[];const M=/(glass|occhiali|spectacle|eyewear|sunglass)/i,H=new Set,$=k=>{let q=k;try{for(;q&&q.parent&&q.parent!==re&&M.test(String(q.parent.name||""));)q=q.parent}catch{}return q||k};re.traverse(k=>{const q=(k.name||"").toLowerCase();try{if(k.isMesh&&M.test(q)){const J=$(k),se=J&&J.uuid?J.uuid:k.uuid;if(!H.has(se)&&H.size===0)H.add(se);else if(!H.has(se)){J.visible=!1;return}}}catch{}if(k.type==="Bone"){for(const J of S)k.name===J&&!h[J]&&(h[J]=k);k.name==="Head"&&!Ce&&(Ce=k),k.name==="LeftShoulder"&&!At&&(At=k),k.name==="RightShoulder"&&!l&&(l=k),k.name==="LeftArm"&&!f&&(f=k),k.name==="RightArm"&&!g&&(g=k),k.name==="LeftForeArm"&&!L&&(L=k),k.name==="RightForeArm"&&!x&&(x=k)}if(!Ee&&k.type==="Bone"&&(q.includes("jaw")||q.includes("lowerjaw")||q.includes("mandible")||q.includes("mixamorigjaw"))&&(Ee=k),console.log("Bones mapped:",Object.keys(h).length,"/",S.length),k.isMesh)try{const J=k.morphTargetDictionary?Object.keys(k.morphTargetDictionary):[];console.log("Mesh:",k.name,"hasMorph:",!!k.morphTargetDictionary,"keys:",J)}catch{}if(!Ee&&k.isSkinnedMesh&&k.skeleton&&Array.isArray(k.skeleton.bones))try{const J=k.skeleton.bones;try{console.log("Skeleton bones:",J.map(_e=>_e.name))}catch{}const se=_e=>String(_e||"").toLowerCase(),ge=(_e,ze)=>{const ht=se(_e);return ze.some(pt=>ht.includes(pt))},ve=["jaw","lowerjaw","mandible","chin","facial_jaw","bip_c_jaw","_jaw","jawbone","ctr_jaw","bn_jaw","j_jaw","mixamorig:jaw","mixamorigjaw"],tt=["mouth","lowerlip","upperlip","lip"];let Pe=J.find(_e=>ge(_e.name,ve));if(Pe||(Pe=J.find(_e=>{var ze;return ge(_e.name,tt)&&(((ze=_e.children)==null?void 0:ze.length)||0)<=2})),!Pe){const _e=J.find(ze=>/head|neck|face/i.test(ze.name));_e&&_e.children&&_e.children.length&&(Pe=_e.children.find(ze=>/jaw|mouth|chin|mandible/i.test(ze.name))||_e.children[0])}Pe&&(Ee=Pe,console.log("Jaw bone trovato via Skeleton:",Pe.name));const zt=J.find(_e=>/\bhead\b/i.test(_e.name));zt&&!Ce&&(Ce=zt)}catch{}if(k.isMesh&&k.morphTargetDictionary&&k.morphTargetInfluences){const J=k.morphTargetDictionary,se={};try{Object.keys(J).forEach(W=>{se[String(W).toLowerCase()]=J[W]})}catch{}const ge=W=>{for(const Rn of W){const cn=se[String(Rn).toLowerCase()];if(cn!==void 0)return cn}},ve=ge(["jawopen","jaw_open","viseme_aa","aa","base_jaw","j_open"]),tt=ge(["mouthfunnel","lipsfunnel","viseme_ou","ou","uw","ow","oh"]),Pe=ge(["mouthpucker","lipspucker","pucker"]),zt=ge(["mouthsmile_l","smileleft","mouthsmileleft"]),_e=ge(["mouthsmile_r","smileright","mouthsmileright"]),ze=ge(["mouthclose","lipsupperclose","lipslowerclose","viseme_mbp","mbp"]),ht=ge(["eyeblink_l","eyeBlink_L","eyelidclose_l","eyelid_l","eyeblinkleft"]),pt=ge(["eyeblink_r","eyeBlink_R","eyelidclose_r","eyelid_r","eyeblinkright"]);if(ve!==void 0&&(/wolf3d_head/i.test(k.name)||!A)){A=k,P=ve,console.log("Morph target (jaw) trovato su",k.name,"index:",P);try{ve!==void 0&&(N.jawOpen=ve),tt!==void 0&&(N.mouthFunnel=tt),Pe!==void 0&&(N.mouthPucker=Pe),zt!==void 0&&(N.mouthSmileL=zt),_e!==void 0&&(N.mouthSmileR=_e),ze!==void 0&&(N.mouthClose=ze),N.mouthFunnel<0&&se.viseme_ou!==void 0&&(N.mouthFunnel=se.viseme_ou),N.jawOpen<0&&se.viseme_aa!==void 0&&(N.jawOpen=se.viseme_aa),(ht!==void 0||pt!==void 0)&&(Se=k,ht!==void 0&&(Re.eyeBlinkLeft=ht),pt!==void 0&&(Re.eyeBlinkRight=pt))}catch{}}else if(!A){const W=ge(["jawopen","mouthopen","viseme_aa","aa"]);W!==void 0&&(A=k,P=W,console.log("Morph target (alt jaw) su",k.name,"index:",P))}try{const W=cn=>{const Bs=String(cn).toLowerCase();return se[Bs]!==void 0?se[Bs]:-1},Rn={jawOpen:ve!==void 0?ve:-1,mouthFunnel:tt!==void 0?tt:-1,mouthPucker:Pe!==void 0?Pe:-1,mouthSmileL:zt!==void 0?zt:-1,mouthSmileR:_e!==void 0?_e:-1,mouthClose:ze!==void 0?ze:-1,eyeBlinkLeft:ht!==void 0?ht:-1,eyeBlinkRight:pt!==void 0?pt:-1,browDownLeft:W("browDownLeft"),browDownRight:W("browDownRight"),browInnerUp:W("browInnerUp"),browOuterUpLeft:W("browOuterUpLeft"),browOuterUpRight:W("browOuterUpRight"),eyeSquintLeft:W("eyeSquintLeft"),eyeSquintRight:W("eyeSquintRight"),eyeWideLeft:W("eyeWideLeft"),eyeWideRight:W("eyeWideRight"),jawForward:W("jawForward"),jawLeft:W("jawLeft"),jawRight:W("jawRight"),mouthFrownLeft:W("mouthFrownLeft"),mouthFrownRight:W("mouthFrownRight"),mouthShrugLower:W("mouthShrugLower"),mouthShrugUpper:W("mouthShrugUpper"),noseSneerLeft:W("noseSneerLeft"),noseSneerRight:W("noseSneerRight"),mouthLowerDownLeft:W("mouthLowerDownLeft"),mouthLowerDownRight:W("mouthLowerDownRight"),mouthLeft:W("mouthLeft"),mouthRight:W("mouthRight"),eyeLookDownLeft:W("eyeLookDownLeft"),eyeLookDownRight:W("eyeLookDownRight"),eyeLookUpLeft:W("eyeLookUpLeft"),eyeLookUpRight:W("eyeLookUpRight"),eyeLookInLeft:W("eyeLookInLeft"),eyeLookInRight:W("eyeLookInRight"),eyeLookOutLeft:W("eyeLookOutLeft"),eyeLookOutRight:W("eyeLookOutRight"),cheekPuff:W("cheekPuff"),cheekSquintLeft:W("cheekSquintLeft"),cheekSquintRight:W("cheekSquintRight"),mouthDimpleLeft:W("mouthDimpleLeft"),mouthDimpleRight:W("mouthDimpleRight"),mouthStretchLeft:W("mouthStretchLeft"),mouthStretchRight:W("mouthStretchRight"),mouthRollLower:W("mouthRollLower"),mouthRollUpper:W("mouthRollUpper"),mouthPressLeft:W("mouthPressLeft"),mouthPressRight:W("mouthPressRight"),mouthUpperUpLeft:W("mouthUpperUpLeft"),mouthUpperUpRight:W("mouthUpperUpRight"),mouthSmileLeft:W("mouthSmileLeft"),mouthSmileRight:W("mouthSmileRight"),tongueOut:W("tongueOut")};Se===null&&(J.eyeBlinkLeft!==void 0||J.eyeBlinkRight!==void 0||ht!==void 0||pt!==void 0)&&(Se=k,J.eyeBlinkLeft!==void 0&&(Re.eyeBlinkLeft=J.eyeBlinkLeft),J.eyeBlinkRight!==void 0&&(Re.eyeBlinkRight=J.eyeBlinkRight),ht!==void 0&&(Re.eyeBlinkLeft=ht),pt!==void 0&&(Re.eyeBlinkRight=pt)),Object.values(Rn).some(cn=>cn!==-1)&&(z.push({mesh:k,indices:Rn}),console.log("Viseme mesh registered:",k.name,Rn))}catch{}}});try{if(Ce){const k=new THREE.Vector3;Ce.getWorldPosition(k);const q=k.clone();q.y-=.06;const J=1.45,se=isFinite(st)&&st>.2?st:J,ge=isFinite(xt)&&xt>=20&&xt<=70?xt:38;Ae.position.set(k.x,q.y+.02,k.z+se),Ae.fov=ge,Ae.lookAt(q),Ae.updateProjectionMatrix();try{console.log("CAM headBone target",{pos:Ae.position.toArray(),fov:Ae.fov,target:q.toArray(),dist:se})}catch{}try{if(Ee){const ve=Ee.rotation.x;Ee.rotation.x+=.02,re.updateMatrixWorld(!0);const tt=new THREE.Box3().setFromObject(re).getSize(new THREE.Vector3);Ee.rotation.x=ve,re.updateMatrixWorld(!0);const Pe=new THREE.Box3().setFromObject(re).getSize(new THREE.Vector3);Nt=Math.abs(tt.y-Pe.y)>1e-4||Math.abs(tt.x-Pe.x)>1e-4,Ie&&console.log("jawBoneHasInfluence",Nt)}}catch{}}else{let k=null;re.traverse(q=>{!k&&(/wolf3d_head/i.test(q.name)||/head$/i.test(q.name))&&(k=q)}),k?Ao(Ae,k,1.2):Ao(Ae,re,1.35);try{console.log("CAM fallback fit")}catch{}}}catch{}bn.visible=!1,kt.visible=!1}catch{}},_=function(){return new Promise((O,M)=>{try{const H=new v;console.log("Carico humanoid FBX da",j),H.load(j,$=>{try{$.updateMatrixWorld(!0)}catch{}y($),O(!0)},void 0,$=>{console.warn("Impossibile caricare FBX",$),M($)})}catch(H){M(H)}})},E=function(){return new Promise((O,M)=>{try{if(!C){M(new Error("GLTFLoader non disponibile"));return}const H=new C;console.log("Carico humanoid GLB da",T),H.load(T,$=>{y($.scene),O(!0)},void 0,$=>{console.warn("Impossibile caricare GLB",$),M($)})}catch(H){M(H)}})};var c=y,w=_,d=E;const v=window.FBXLoader,C=window.GLTFLoader;if(!window.THREE||!v&&!C){console.warn("Loader non presente. THREE:",!!window.THREE,"FBXLoader:",!!v,"GLTFLoader:",!!C);return}const j="",T="/images/readyplayerme.glb?v="+Date.now();(async()=>{try{if(re)return;if(C){await E();return}if(v&&j){await _();return}}catch(O){console.warn("Nessun modello caricato",O)}finally{it=!1}})()}catch(v){console.warn("Errore loadHumanoid()",v),it=!1}}}function Ao(c,w,d=1.25){try{const v=new THREE.Box3().setFromObject(w),C=v.getSize(new THREE.Vector3),j=v.getCenter(new THREE.Vector3),T=c.aspect&&isFinite(c.aspect)?c.aspect:1,y=THREE.MathUtils.degToRad(c.fov),_=2*Math.atan(Math.tan(y/2)*T),E=C.y/2/Math.tan(y/2),O=C.x/2/Math.tan(_/2);let M=Math.max(E,O)*(d||1);const H=new THREE.Vector3().subVectors(c.position,j).normalize();(!isFinite(H.lengthSq())||H.lengthSq()===0)&&H.set(0,0,1),c.position.copy(j.clone().add(H.multiplyScalar(M))),c.near=Math.max(.01,M/100),c.far=Math.max(c.near+1,M*10+C.length()),c.lookAt(j),c.updateProjectionMatrix();try{console.log("CAM fitCameraToObject",{pos:c.position.toArray(),fov:c.fov,center:j.toArray(),size:C.toArray(),dist:M,aspect:T})}catch{}}catch(v){console.warn("fitCameraToObject error",v)}}}),{}}}),Ec={ref:"rootEl",id:"enjoyTalkRoot",class:"flex flex-col min-h-[100dvh] w-full bg-[#0f172a] pb-[96px] sm:pb-0"},Cc={class:"px-4 py-4"},Mc={class:"mx-auto w-full max-w-[520px] flex items-center gap-3"},Pc=["src"];function Hc(e,t,n,o,s,i){return va(),Ra("div",Ec,[me("div",Cc,[me("div",Mc,[me("img",{id:"teamLogo",src:e.teamLogo,alt:"EnjoyTalk 3D",class:"w-10 h-10 rounded-full object-cover border border-slate-600"},null,8,Pc),t[0]||(t[0]=me("h1",{class:"font-sans text-2xl text-white"},"EnjoyTalk 3D",-1))])]),t[1]||(t[1]=me("div",{class:"flex-1 flex items-center justify-center p-4"},[me("div",{class:"relative w-full"},[me("div",{class:"mx-auto w-full max-w-[520px] px-3 sm:px-0"},[me("div",{id:"avatarStage",class:"bg-[#111827] border border-slate-700 rounded-md overflow-hidden w-full h-auto max-h-[calc(100dvh-220px)] aspect-[3/4]"}),me("video",{id:"heygenVideo",class:"hidden w-full h-auto max-h-[calc(100dvh-220px)] rounded-md border border-slate-700 bg-black",autoplay:"",playsinline:""}),me("audio",{id:"heygenAudio",class:"hidden",autoplay:""})]),me("div",{id:"thinkingBubble",class:"hidden absolute top-4 left-1/2 transform -translate-x-1/2 bg-white rounded-lg px-4 py-2 shadow-lg border border-gray-300"},[me("div",{class:"text-gray-700 text-sm font-medium"},"💭 Sto pensando..."),me("div",{class:"absolute bottom-0 left-1/2 transform translate-y-full -translate-x-1/2"},[me("div",{class:"w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})])]),me("div",{id:"listeningBadge",class:"hidden absolute top-4 right-4 bg-rose-600/90 text-white text-xs font-semibold px-2.5 py-1 rounded-md shadow animate-pulse"}," 🎤 Ascolto... "),me("div",{id:"debugOverlay",class:"hidden absolute left-1/2 -translate-x-1/2 top-3 z-10 w-full max-w-[520px] px-3 sm:px-0",style:{"pointer-events":"auto"}},[me("div",{class:"bg-black/70 backdrop-blur-sm border border-slate-600 rounded-md overflow-hidden shadow-lg"},[me("div",{class:"flex items-center justify-between px-3 py-2 border-b border-slate-700 bg-black/60 sticky top-0"},[me("div",{class:"text-slate-200 text-xs font-semibold"},"Debug"),me("div",{class:"flex items-center gap-2"},[me("button",{id:"debugCopy",class:"text-[11px] px-2 py-1 bg-slate-700/70 hover:bg-slate-600 text-white rounded"},"Copia"),me("button",{id:"debugClear",class:"text-[11px] px-2 py-1 bg-slate-700/70 hover:bg-slate-600 text-white rounded"},"Pulisci"),me("button",{id:"debugClose",class:"text-[11px] px-2 py-1 bg-slate-700/70 hover:bg-slate-600 text-white rounded"},"Chiudi")])]),me("div",{class:"max-h-[50vh] sm:max-h-[60vh] overflow-auto p-2 text-[11px] font-mono text-slate-200 leading-relaxed",style:{"margin-bottom":"calc(var(--controls-pad, 0px))"}},[me("div",{id:"debugContent",class:"space-y-1"})])])])])],-1)),t[2]||(t[2]=Ma('<div id="controlsBar" class="fixed bottom-0 left-0 w-full border-t border-slate-700 bg-[#0f172a] z-20 pb-[env(safe-area-inset-bottom)]"><div class="px-3 py-3 sm:px-4 sm:py-4"><div class="mx-auto w-full max-w-[520px] px-3 sm:px-0"><div class="flex flex-wrap w-full gap-2 items-center min-w-0"><input id="textInput" type="text" placeholder="Scrivi la domanda..." class="flex-1 min-w-0 px-3 py-3 bg-[#111827] text-white border border-slate-700 rounded-md placeholder-slate-400 focus:border-indigo-500 focus:outline-none text-[15px] sm:text-base"><button id="sendBtn" class="px-3 py-3 sm:px-4 sm:py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors whitespace-nowrap text-sm sm:text-base">📤 Invia</button><button id="micBtn" class="px-3 py-3 sm:px-4 sm:py-3 bg-rose-600 hover:bg-rose-700 text-white rounded-md transition-colors whitespace-nowrap text-sm sm:text-base">🎤 Parla</button></div><div class="mt-2 flex items-center gap-3 text-slate-300 text-xs sm:text-sm"><label class="inline-flex items-center gap-2 cursor-pointer select-none"><input id="useVideoAvatar" type="checkbox" class="accent-indigo-600"><span>Video Avatar</span></label><label class="inline-flex items-center gap-2 cursor-pointer select-none"><input id="useBrowserTts" type="checkbox" class="accent-indigo-600" checked><span>Usa TTS del browser (italiano)</span></label><span id="browserTtsStatus" class="opacity-70"></span><span id="videoAvatarStatus" class="opacity-70"></span><label class="inline-flex items-center gap-2 cursor-pointer select-none ml-auto"><input id="useAdvancedLipsync" type="checkbox" class="accent-emerald-600"><span>LipSync avanzato (WebAudio)</span></label></div><div id="liveText" class="hidden mt-3 text-slate-300 min-h-[1.5rem]"></div></div></div></div>',1)),t[3]||(t[3]=me("audio",{id:"ttsPlayer",class:"hidden",playsinline:""},null,-1))],512)}const Ac=Rc(Tc,[["render",Hc]]),Cn=document.getElementById("enjoyTalkRoot"),Hn={};Cn&&(Hn.heygenApiKey=Cn.dataset.heygenApiKey||"",Hn.heygenServerUrl=Cn.dataset.heygenServerUrl||"https://api.heygen.com",Hn.locale=Cn.dataset.locale||"it-IT",Hn.teamLogo=Cn.dataset.teamLogo||"/images/logoai.jpeg");xc(Ac,Hn).mount("#enjoyTalkRoot");
